/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={"./src/baseAnimation.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   baseAnimation: () => (/* binding */ baseAnimation)\n/* harmony export */ });\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util.js */ "./src/util.ts");\n\nclass baseAnimation {\n    fps;\n    frame;\n    frame_timer;\n    frame_interval;\n    frame_y;\n    frame_x;\n    mark_delete;\n    img;\n    x;\n    y;\n    width;\n    height;\n    sprite_width;\n    sprite_height;\n    sprite_length;\n    animation_repeat;\n    constructor(opt) {\n        opt.fps ??= 20;\n        opt.animation_repeat ??= true;\n        this.fps = opt.fps;\n        this.frame = 0;\n        this.frame_timer = 0;\n        this.frame_interval = 1000 / this.fps;\n        this.frame_y = 0;\n        this.frame_x = 0;\n        this.mark_delete = false;\n        this.img = opt.img;\n        this.x = opt.x;\n        this.y = opt.y;\n        this.width = opt.width;\n        this.height = opt.height;\n        this.sprite_length = opt.sprite_length;\n        this.sprite_width = opt.sprite_width;\n        this.sprite_height = opt.sprite_height;\n        this.animation_repeat = opt.animation_repeat;\n    }\n    update(opt) {\n        if (this.frame_timer >= this.frame_interval) {\n            this.frame_timer = 0;\n            if (this.frame >= this.sprite_length) {\n                if (this.animation_repeat)\n                    this.frame = 0;\n                else if (!this.animation_repeat && opt.onframecomplete) {\n                    opt.onframecomplete();\n                }\n                else\n                    this.mark_delete = true;\n            }\n            else {\n                this.frame++;\n                this.frame_x = this.frame * this.sprite_width;\n                if (opt.onframechange) {\n                    opt.onframechange();\n                }\n            }\n        }\n        else {\n            this.frame_timer += opt.delta_time;\n        }\n    }\n    draw(opt) {\n        opt.ctx.drawImage(this.img, this.frame_x, this.frame_y, this.sprite_width, this.sprite_height, (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathFloor)(this.x), (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathFloor)(this.y), this.width, this.height);\n    }\n    set_position(opt) {\n        this.x -= opt.game_speed;\n        if (this.x < 0 - this.width)\n            this.mark_delete = true;\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/baseAnimation.ts?')},"./src/baseBg.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   baseBg: () => (/* binding */ baseBg)\n/* harmony export */ });\n/* harmony import */ var _layer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./layer.js */ "./src/layer.ts");\n\nclass baseBg {\n    width;\n    height;\n    ground;\n    canvas_width;\n    canvas_height;\n    img_setup = (src) => {\n        const result = new Image();\n        result.src = src;\n        return result;\n    };\n    bg_list = [];\n    constructor(opt) {\n        this.width = opt.width;\n        this.height = opt.height;\n        this.ground = opt.ground;\n        this.canvas_width = opt.canvas_width;\n        this.canvas_height = opt.canvas_height;\n        opt.img.forEach((i) => {\n            this.bg_list.push(new _layer_js__WEBPACK_IMPORTED_MODULE_0__.layer({ img: this.img_setup(i.url), canvas_height: this.canvas_height, width: this.width, height: this.height, speed_modifier: i.speed_modifier }));\n        });\n    }\n    update = (opt) => {\n        this.bg_list.forEach((i) => {\n            i.update(opt.game_speed);\n        });\n    };\n    draw = (opt) => {\n        this.bg_list.forEach((i) => {\n            i.draw(opt.ctx);\n        });\n    };\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/baseBg.ts?')},"./src/bg2.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bg2: () => (/* binding */ bg2)\n/* harmony export */ });\n/* harmony import */ var _baseBg_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./baseBg.js */ "./src/baseBg.ts");\n\nclass bg2 extends _baseBg_js__WEBPACK_IMPORTED_MODULE_0__.baseBg {\n    constructor(opt) {\n        super({\n            img: [\n                { url: "./res/bg2/layer-1.png", speed_modifier: 0.2 },\n                { url: "./res/bg2/layer-2.png", speed_modifier: 0.4 },\n                { url: "./res/bg2/layer-3.png", speed_modifier: 0.6 },\n                { url: "./res/bg2/layer-4.png", speed_modifier: 0.8 },\n                { url: "./res/bg2/layer-5.png", speed_modifier: 1 },\n            ],\n            canvas_width: opt.canvas_width,\n            canvas_height: opt.canvas_height,\n            width: 2400,\n            height: 700,\n            ground: 50,\n        });\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/bg2.ts?')},"./src/control.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   control: () => (/* binding */ control)\n/* harmony export */ });\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util.js */ "./src/util.ts");\n\nconst BTN_SIZE = 80;\nconst BTN_PADDING = 30;\nclass button {\n    name;\n    x;\n    y;\n    uid;\n    uid_text;\n    uid_number;\n    img;\n    color;\n    width;\n    height;\n    constructor(opt) {\n        opt.width ??= BTN_SIZE;\n        opt.height ??= BTN_SIZE;\n        opt.color ??= "rgba(255,255,255,0.1)";\n        this.uid = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.genUID)();\n        this.uid_number = `${this.uid[0]},${this.uid[1]},${this.uid[2]}`;\n        this.uid_text = `rgb(${this.uid[0]},${this.uid[1]},${this.uid[2]})`;\n        this.name = opt.name;\n        this.img = new Image();\n        this.img.src = opt.img;\n        this.x = opt.x;\n        this.y = opt.y;\n        this.width = opt.width;\n        this.height = opt.height;\n        this.color = opt.color;\n    }\n    draw(opt) {\n        opt.ctx.fillStyle = this.color;\n        opt.ctx.beginPath();\n        opt.ctx.arc((0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathFloor)(this.x + this.width * 0.5), (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathFloor)(this.y + this.width * 0.5), BTN_SIZE * 0.5, 0, _util_js__WEBPACK_IMPORTED_MODULE_0__.MathPI2);\n        opt.ctx.fill();\n        opt.ctx.drawImage(this.img, 0, 0, 16, 16, (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathFloor)(this.x), (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathFloor)(this.y), this.width, this.height);\n    }\n    draw_mark(opt) {\n        opt.ctx.fillStyle = this.uid_text;\n        opt.ctx.beginPath();\n        opt.ctx.arc((0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathFloor)(this.x + this.width * 0.5), (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathFloor)(this.y + this.width * 0.5), BTN_SIZE * 0.7, 0, _util_js__WEBPACK_IMPORTED_MODULE_0__.MathPI2);\n        opt.ctx.fill();\n    }\n}\nclass control {\n    canvas_width;\n    canvas_height;\n    pause;\n    info;\n    left;\n    left_down;\n    left_up;\n    right;\n    right_down;\n    right_up;\n    btn_list = [];\n    canvas_rect;\n    canvas_mark;\n    constructor(opt) {\n        this.canvas_width = opt.canvas_width;\n        this.canvas_height = opt.canvas_height;\n        this.canvas_mark = opt.canvas_mark;\n        this.canvas_rect = this.canvas_mark.getBoundingClientRect();\n        this.info = new button({\n            name: "Info",\n            img: "./res/ctl/info.svg",\n            x: this.canvas_width - BTN_SIZE - BTN_PADDING,\n            y: 110,\n        });\n        this.pause = new button({\n            name: "Enter",\n            img: "./res/ctl/pause.svg",\n            x: this.canvas_width - BTN_SIZE - BTN_PADDING,\n            y: this.info.y + BTN_SIZE + BTN_PADDING,\n        });\n        this.left = new button({\n            name: "ArrowLeft",\n            img: "./res/ctl/left.svg",\n            x: BTN_PADDING,\n            y: this.canvas_height - BTN_PADDING - BTN_SIZE,\n        });\n        this.left_up = new button({\n            name: "ArrowUp",\n            img: "./res/ctl/up.svg",\n            x: BTN_PADDING,\n            y: this.canvas_height - BTN_PADDING * 2 - BTN_SIZE * 2,\n        });\n        this.left_down = new button({\n            name: "ArrowDown",\n            img: "./res/ctl/down.svg",\n            x: BTN_PADDING * 2 + BTN_SIZE,\n            y: this.canvas_height - BTN_PADDING - BTN_SIZE,\n        });\n        this.right = new button({\n            name: "ArrowRight",\n            img: "./res/ctl/right.svg",\n            x: this.canvas_width - BTN_PADDING - BTN_SIZE,\n            y: this.canvas_height - BTN_PADDING - BTN_SIZE,\n        });\n        this.right_up = new button({\n            name: "ArrowUp",\n            img: "./res/ctl/up.svg",\n            x: this.canvas_width - BTN_PADDING - BTN_SIZE,\n            y: this.canvas_height - BTN_PADDING * 2 - BTN_SIZE * 2,\n        });\n        this.right_down = new button({\n            name: "ArrowDown",\n            img: "./res/ctl/down.svg",\n            x: this.canvas_width - BTN_PADDING * 2 - BTN_SIZE * 2,\n            y: this.canvas_height - BTN_PADDING - BTN_SIZE,\n        });\n        this.btn_list = [this.pause, this.info, this.left, this.left_up, this.left_down, this.right, this.right_up, this.right_down];\n    }\n    resize() {\n        this.canvas_rect = this.canvas_mark.getBoundingClientRect();\n        console.log({ width: this.canvas_rect.width, height: this.canvas_rect.height });\n    }\n    draw(opt) {\n        this.btn_list.forEach((i) => {\n            i.draw({ ctx: opt.ctx });\n            i.draw_mark({ ctx: opt.ctxMark });\n        });\n    }\n    get_mouse_location(canvas, event) {\n        var totalOffsetX = 0;\n        var totalOffsetY = 0;\n        var canvasX = 0;\n        var canvasY = 0;\n        var currentElement = canvas;\n        do {\n            totalOffsetX += currentElement.offsetLeft - currentElement.scrollLeft;\n            totalOffsetY += currentElement.offsetTop - currentElement.scrollTop;\n        } while ((currentElement = currentElement.offsetParent ? currentElement.offsetParent : null));\n        canvasX = event.pageX - totalOffsetX;\n        canvasY = event.pageY - totalOffsetY;\n        const scale = this.canvas_width / this.canvas_rect.width;\n        const x = canvasX * scale + this.canvas_width * 0.5;\n        const y = canvasY * scale + this.canvas_height * 0.5;\n        return { x: x, y: y };\n    }\n    mouse_event(opt) {\n        let { x, y } = this.get_mouse_location(opt.canvas_mark, opt.event);\n        if (x > -1 && y > -1) {\n            if (opt.debug) {\n                opt.pointer_ctx.clearRect(x - 50, y - 50, 100, 100);\n                opt.pointer_ctx.fillStyle = "red";\n                opt.pointer_ctx.fillRect(x - 5, y - 5, 10, 10);\n            }\n            const data = opt.marker_ctx.getImageData(x, y, 1, 1).data;\n            if (data && data.length > 3 && data[0] && data[1] && data[2]) {\n                if (data[0] > 0 && data[1] > 0 && data[2] > 0) {\n                    const btn = this.btn_list.filter((i) => {\n                        return i.uid[0] === data[0] && i.uid[1] === data[1] && i.uid[2] === data[2];\n                    });\n                    if (btn && btn.length > 0 && btn[0]) {\n                        const key = btn[0].name;\n                        if (key !== "Info") {\n                            // console.log(`x: ${x}\\ny: ${y}\\ndata: ${data}\\nkey:${key}`);\n                            window.dispatchEvent(new KeyboardEvent(opt.event_name, { key: key }));\n                        }\n                    }\n                }\n            }\n            else if (data[0] === 0 && data[1] === 0 && data[2] === 0) {\n                window.dispatchEvent(new KeyboardEvent(opt.event_name, { key: " " }));\n            }\n        }\n    }\n    attach_mouse(opt) {\n        opt.canvas_mark.addEventListener("mousedown", (event) => {\n            this.mouse_event({\n                event_name: "keydown",\n                canvas_mark: opt.canvas_mark,\n                marker_ctx: opt.marker_ctx,\n                pointer_ctx: opt.pointer_ctx,\n                event: event,\n                debug: opt.debug,\n            });\n        });\n        opt.canvas_mark.addEventListener("mouseup", (e) => {\n            this.mouse_event({\n                event_name: "keyup",\n                canvas_mark: opt.canvas_mark,\n                marker_ctx: opt.marker_ctx,\n                pointer_ctx: opt.pointer_ctx,\n                event: e,\n                debug: opt.debug,\n            });\n        });\n    }\n    last_touch_location = { x: -1, y: -1 };\n    get_touch_location(canvas, event) {\n        if (event.touches && event.touches.length > 0 && event.touches[0]) {\n            var totalOffsetX = 0;\n            var totalOffsetY = 0;\n            var canvasX = 0;\n            var canvasY = 0;\n            var currentElement = canvas;\n            do {\n                totalOffsetX += currentElement.offsetLeft - currentElement.scrollLeft;\n                totalOffsetY += currentElement.offsetTop - currentElement.scrollTop;\n            } while ((currentElement = currentElement.offsetParent ? currentElement.offsetParent : null));\n            canvasX = event.touches[0].pageX - totalOffsetX;\n            canvasY = event.touches[0].pageY - totalOffsetY;\n            const scale = this.canvas_width / this.canvas_rect.width;\n            const x = canvasX * scale + this.canvas_width * 0.5;\n            const y = canvasY * scale + this.canvas_height * 0.5;\n            // console.log({ x, y, scale });\n            this.last_touch_location = { x: x, y: y };\n        }\n        return this.last_touch_location;\n    }\n    touch_event(opt) {\n        let { x, y } = this.get_touch_location(this.canvas_mark, opt.event);\n        if (x > -1 && y > -1) {\n            if (opt.debug) {\n                opt.pointer_ctx.clearRect(x - 50, y - 50, 100, 100);\n                opt.pointer_ctx.fillStyle = "red";\n                opt.pointer_ctx.fillRect(x - 5, y - 5, 10, 10);\n            }\n            const data = opt.marker_ctx.getImageData(x, y, 1, 1).data;\n            if (data && data.length > 3 && data[0] && data[1] && data[2]) {\n                if (data[0] > 0 && data[1] > 0 && data[2] > 0) {\n                    const btn = this.btn_list.filter((i) => {\n                        return i.uid[0] === data[0] && i.uid[1] === data[1] && i.uid[2] === data[2];\n                    });\n                    if (btn && btn.length > 0 && btn[0]) {\n                        const key = btn[0].name;\n                        if (key !== "Info") {\n                            // console.log(`x: ${x}\\ny: ${y}\\ndata: ${data}\\nkey:${key}`);\n                            window.dispatchEvent(new KeyboardEvent(opt.event_name, { key: key }));\n                        }\n                    }\n                }\n            }\n            else if (data[0] === 0 && data[1] === 0 && data[2] === 0) {\n                window.dispatchEvent(new KeyboardEvent(opt.event_name, { key: " " }));\n            }\n        }\n    }\n    attach_touch(opt) {\n        opt.canvas_mark.addEventListener("touchstart", (event) => {\n            this.touch_event({\n                event_name: "keydown",\n                canvas_mark: opt.canvas_mark,\n                marker_ctx: opt.marker_ctx,\n                pointer_ctx: opt.pointer_ctx,\n                event: event,\n                debug: opt.debug,\n            });\n        });\n        opt.canvas_mark.addEventListener("touchend", (e) => {\n            this.touch_event({\n                event_name: "keyup",\n                canvas_mark: opt.canvas_mark,\n                marker_ctx: opt.marker_ctx,\n                pointer_ctx: opt.pointer_ctx,\n                event: e,\n                debug: opt.debug,\n            });\n        });\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/control.ts?')},"./src/dust.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dust: () => (/* binding */ dust)\n/* harmony export */ });\n/* harmony import */ var _particle_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./particle.js */ "./src/particle.ts");\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util.js */ "./src/util.ts");\n\n\nclass dust extends _particle_js__WEBPACK_IMPORTED_MODULE_0__.particle {\n    color;\n    constructor(opt) {\n        super({ x: opt.x, y: opt.y });\n        this.color = opt.color;\n    }\n    draw(opt) {\n        opt.ctx.beginPath();\n        opt.ctx.arc((0,_util_js__WEBPACK_IMPORTED_MODULE_1__.MathFloor)(this.x), (0,_util_js__WEBPACK_IMPORTED_MODULE_1__.MathFloor)(this.y), this.size, 0, _util_js__WEBPACK_IMPORTED_MODULE_1__.MathPI2);\n        opt.ctx.fillStyle = this.color;\n        opt.ctx.fill();\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/dust.ts?')},"./src/enemy/baseEnemy.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   baseEnemy: () => (/* binding */ baseEnemy)\n/* harmony export */ });\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util.js */ "./src/util.ts");\n/* harmony import */ var _baseAnimation_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../baseAnimation.js */ "./src/baseAnimation.ts");\n\n\nclass baseEnemy extends _baseAnimation_js__WEBPACK_IMPORTED_MODULE_1__.baseAnimation {\n    debug = false;\n    uid;\n    uid_text;\n    uid_number;\n    canvas_width;\n    canvas_height;\n    point;\n    explode_in;\n    explode_out;\n    have_particle;\n    collision_x;\n    collision_y;\n    collision_adjust_x;\n    collision_adjust_y;\n    collision_scale;\n    constructor(opt) {\n        super(opt);\n        opt.debug ??= false;\n        opt.explode_in ??= false;\n        opt.explode_out ??= false;\n        opt.have_particle ??= false;\n        opt.point ??= 1;\n        opt.collision_scale ??= 0.5;\n        opt.collision_x ??= 0;\n        opt.collision_y ??= 0;\n        this.debug = opt.debug;\n        this.uid = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.genUID)();\n        this.uid_number = `${this.uid[0]},${this.uid[1]},${this.uid[2]}`;\n        this.uid_text = `rgb(${this.uid[0]},${this.uid[1]},${this.uid[2]})`;\n        this.canvas_width = opt.canvas_width;\n        this.canvas_height = opt.canvas_height;\n        this.explode_in = opt.explode_in;\n        this.explode_out = opt.explode_out;\n        this.have_particle = opt.have_particle;\n        this.point = opt.point;\n        this.collision_scale = opt.collision_scale;\n        this.collision_adjust_x = opt.collision_x;\n        this.collision_adjust_y = opt.collision_y;\n        this.collision_x = this.x + this.collision_adjust_x + this.width * this.collision_scale;\n        this.collision_y = this.y + this.collision_adjust_y + this.height * this.collision_scale;\n    }\n    update(opt) {\n        super.update(opt);\n        this.collision_x = this.x + this.collision_adjust_x + this.width * this.collision_scale;\n        this.collision_y = this.y + this.collision_adjust_y + this.height * this.collision_scale;\n    }\n    draw(opt) {\n        if (opt.ctx_collision) {\n            opt.ctx_collision.fillStyle = this.uid_text;\n            opt.ctx_collision.fillRect((0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathFloor)(this.x), (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathFloor)(this.y), this.width, this.height);\n        }\n        //draw sprite\n        super.draw(opt);\n        //draw collision area\n        if (this.debug) {\n            opt.ctx.save();\n            opt.ctx.strokeStyle = "white";\n            opt.ctx.beginPath();\n            opt.ctx.arc(this.collision_x, this.collision_y, this.collision_scale * 100, 0, _util_js__WEBPACK_IMPORTED_MODULE_0__.MathPI2);\n            opt.ctx.stroke();\n            opt.ctx.restore();\n        }\n    }\n    set_position(opt) {\n        super.set_position(opt);\n        this.collision_x = this.x + this.collision_adjust_x + this.width * this.collision_scale;\n    }\n    is_collide(opt) {\n        const dx = this.collision_x - opt.player.collision_x;\n        const dy = this.collision_y - opt.player.collision_y;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n        return distance < this.width * this.collision_scale + opt.player.width * opt.player.collision_scale;\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/enemy/baseEnemy.ts?')},"./src/enemy/enemy1.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   enemy1: () => (/* binding */ enemy1)\n/* harmony export */ });\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util.js */ "./src/util.ts");\n/* harmony import */ var _baseEnemy_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./baseEnemy.js */ "./src/enemy/baseEnemy.ts");\n\n\nconst imgEnemy1 = new Image();\nimgEnemy1.src = "./res/enemy/enemy1.png";\nclass enemy1 extends _baseEnemy_js__WEBPACK_IMPORTED_MODULE_1__.baseEnemy {\n    life_index;\n    life_length;\n    constructor(opt) {\n        const sprite_length = 5;\n        const sprite_width = 293;\n        const sprite_height = 155;\n        const size_modifier = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 0.1 + 0.3;\n        const width = sprite_width * size_modifier;\n        const height = sprite_height * size_modifier;\n        super({\n            ...opt,\n            img: imgEnemy1,\n            // x: MathRandom() * (opt.canvas_width - width),\n            x: (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * (opt.canvas_width - width) + opt.canvas_width * 0.5,\n            y: (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * (opt.canvas_height - height),\n            width,\n            height,\n            sprite_width,\n            sprite_height,\n            sprite_length,\n            explode_in: true,\n            explode_out: true,\n            point: 4,\n        });\n        this.life_index = 0;\n        this.life_length = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 5000 + 5000;\n    }\n    update(opt) {\n        this.x += (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 7 - 3.5;\n        this.y += (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 7 - 3.5;\n        this.life_index += opt.delta_time;\n        if (this.life_index > this.life_length)\n            this.mark_delete = true;\n        super.update(opt);\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/enemy/enemy1.ts?')},"./src/enemy/enemy10.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   enemy10: () => (/* binding */ enemy10)\n/* harmony export */ });\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util.js */ "./src/util.ts");\n/* harmony import */ var _baseEnemy_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./baseEnemy.js */ "./src/enemy/baseEnemy.ts");\n\n\nconst imgEnemy10 = new Image();\nimgEnemy10.src = "./res/enemy/enemy10.png";\nclass enemy10 extends _baseEnemy_js__WEBPACK_IMPORTED_MODULE_1__.baseEnemy {\n    constructor(opt) {\n        const sprite_length = 5;\n        const sprite_width = 60;\n        const sprite_height = 87;\n        const size_modifier = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 0.75 + 0.95;\n        const width = sprite_width * size_modifier;\n        const height = sprite_height * size_modifier;\n        super({\n            ...opt,\n            img: imgEnemy10,\n            x: opt.canvas_width + width,\n            y: opt.canvas_height - height,\n            width,\n            height,\n            sprite_width,\n            sprite_height,\n            sprite_length,\n            point: 1,\n        });\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/enemy/enemy10.ts?')},"./src/enemy/enemy11.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   enemy11: () => (/* binding */ enemy11)\n/* harmony export */ });\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util.js */ "./src/util.ts");\n/* harmony import */ var _baseEnemy_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./baseEnemy.js */ "./src/enemy/baseEnemy.ts");\n\n\nconst imgEnemy11 = new Image();\nimgEnemy11.src = "./res/enemy/enemy11.png";\nclass enemy11 extends _baseEnemy_js__WEBPACK_IMPORTED_MODULE_1__.baseEnemy {\n    destination_y;\n    speed;\n    string_x;\n    string_y;\n    constructor(opt) {\n        const sprite_length = 5;\n        const sprite_width = 120;\n        const sprite_height = 144;\n        const size_modifier = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 0.5 + 0.7;\n        const width = sprite_width * size_modifier;\n        const height = sprite_height * size_modifier;\n        super({\n            ...opt,\n            img: imgEnemy11,\n            x: opt.canvas_width + width,\n            y: (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() > 0.5 ? (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * (opt.canvas_height - height) : 0 - height,\n            width,\n            height,\n            sprite_width,\n            sprite_height,\n            sprite_length,\n            point: 3,\n        });\n        this.destination_y = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * ((opt.canvas_height - this.height) * 0.8);\n        this.speed = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 2 - 4;\n        if (this.y < this.destination_y) {\n            this.speed *= -1;\n        }\n        this.string_x = this.x + this.width * 0.5;\n        this.string_y = this.y + 50;\n    }\n    update(opt) {\n        this.y += this.speed;\n        this.string_y = this.y + 50;\n        this.string_x = this.x + this.width * 0.5;\n        if (this.y > this.destination_y && this.speed > 0) {\n            this.speed *= -1;\n        }\n        if (this.y < 0 - this.height - 5) {\n            this.mark_delete = true;\n        }\n        super.update(opt);\n    }\n    draw(opt) {\n        opt.ctx.beginPath();\n        opt.ctx.moveTo(this.string_x, 0);\n        opt.ctx.lineTo(this.string_x, this.string_y);\n        opt.ctx.stroke();\n        super.draw(opt);\n    }\n    set_position(opt) {\n        super.set_position(opt);\n        this.string_x = this.x + this.width * 0.5;\n        this.collision_x = this.x + this.collision_adjust_x + this.width * this.collision_scale;\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/enemy/enemy11.ts?')},"./src/enemy/enemy2.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   enemy2: () => (/* binding */ enemy2)\n/* harmony export */ });\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util.js */ "./src/util.ts");\n/* harmony import */ var _baseEnemy_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./baseEnemy.js */ "./src/enemy/baseEnemy.ts");\n\n\nconst imgEnemy2 = new Image();\nimgEnemy2.src = "./res/enemy/enemy2.png";\nclass enemy2 extends _baseEnemy_js__WEBPACK_IMPORTED_MODULE_1__.baseEnemy {\n    move_speed;\n    angle;\n    angle_speed;\n    curve;\n    constructor(opt) {\n        const sprite_length = 5;\n        const sprite_width = 266;\n        const sprite_height = 188;\n        const size_modifier = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 0.1 + 0.3;\n        const width = sprite_width * size_modifier;\n        const height = sprite_height * size_modifier;\n        super({\n            ...opt,\n            img: imgEnemy2,\n            x: opt.canvas_width,\n            y: (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * (opt.canvas_height - height),\n            width,\n            height,\n            sprite_width,\n            sprite_height,\n            sprite_length,\n            have_particle: true,\n            point: 3,\n        });\n        this.move_speed = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 4 + 1;\n        this.angle = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 2;\n        this.angle_speed = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 0.2;\n        this.curve = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 5;\n    }\n    update(opt) {\n        this.x -= this.move_speed;\n        if (this.x < 0 - this.width)\n            this.mark_delete = true;\n        this.y += this.curve * Math.sin(this.angle);\n        this.angle += this.angle_speed;\n        super.update(opt);\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/enemy/enemy2.ts?')},"./src/enemy/enemy3.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   enemy3: () => (/* binding */ enemy3)\n/* harmony export */ });\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util.js */ "./src/util.ts");\n/* harmony import */ var _baseEnemy_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./baseEnemy.js */ "./src/enemy/baseEnemy.ts");\n\n\nconst imgEnemy3 = new Image();\nimgEnemy3.src = "./res/enemy/enemy3.png";\nclass enemy3 extends _baseEnemy_js__WEBPACK_IMPORTED_MODULE_1__.baseEnemy {\n    angle;\n    angle_speed;\n    life_index;\n    life_length;\n    constructor(opt) {\n        const sprite_length = 5;\n        const sprite_width = 218;\n        const sprite_height = 177;\n        const size_modifier = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 0.1 + 0.3;\n        const width = sprite_width * size_modifier;\n        const height = sprite_height * size_modifier;\n        super({\n            ...opt,\n            img: imgEnemy3,\n            x: opt.canvas_width,\n            y: (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * (opt.canvas_height - height),\n            width,\n            height,\n            sprite_width,\n            sprite_height,\n            sprite_length,\n            explode_out: true,\n            have_particle: true,\n            point: 3,\n        });\n        this.angle = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 2;\n        this.angle_speed = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 0.5 + 0.5;\n        this.life_index = 0;\n        this.life_length = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 5000 + 5000;\n    }\n    update(opt) {\n        this.x = (this.canvas_width / 2) * Math.cos((this.angle * Math.PI) / 90) + (this.canvas_width / 2 - this.width / 2);\n        if (this.x + this.width < 0)\n            this.x = this.canvas_width;\n        this.y = (this.canvas_height / 2) * Math.sin((this.angle * Math.PI) / 270) + (this.canvas_height / 2 - this.height / 2);\n        if (this.y + this.height < 0)\n            this.y = this.canvas_height;\n        this.angle += this.angle_speed;\n        this.life_index += opt.delta_time;\n        if (this.life_index > this.life_length)\n            this.mark_delete = true;\n        super.update(opt);\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/enemy/enemy3.ts?')},"./src/enemy/enemy4.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   enemy4: () => (/* binding */ enemy4)\n/* harmony export */ });\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util.js */ "./src/util.ts");\n/* harmony import */ var _baseEnemy_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./baseEnemy.js */ "./src/enemy/baseEnemy.ts");\n\n\nconst imgEnemy4 = new Image();\nimgEnemy4.src = "./res/enemy/enemy4.png";\nclass enemy4 extends _baseEnemy_js__WEBPACK_IMPORTED_MODULE_1__.baseEnemy {\n    new_x;\n    new_y;\n    last_move;\n    interval;\n    life_index;\n    life_length;\n    constructor(opt) {\n        const sprite_length = 8;\n        const sprite_width = 213;\n        const sprite_height = 213;\n        const size_modifier = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 0.1 + 0.3;\n        const width = sprite_width * size_modifier;\n        const height = sprite_height * size_modifier;\n        super({\n            ...opt,\n            img: imgEnemy4,\n            // x: MathRandom() * (opt.canvas_width - width),\n            x: (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * (opt.canvas_width - width) + opt.canvas_width * 0.5,\n            y: (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * (opt.canvas_height - height),\n            width,\n            height,\n            sprite_width,\n            sprite_height,\n            sprite_length,\n            explode_in: true,\n            explode_out: true,\n            have_particle: true,\n            point: 5,\n        });\n        this.new_x = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * (opt.canvas_width - width);\n        this.new_y = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * (opt.canvas_height - height);\n        this.last_move = 0;\n        this.interval = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathFloor)((0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 200 + 50);\n        this.life_index = 0;\n        this.life_length = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 5000 + 5000;\n    }\n    update(opt) {\n        if (this.last_move % this.interval === 0) {\n            // if (Modulus(this.last_move, this.interval) === 0) {\n            this.last_move = 0;\n            this.new_x = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * (this.canvas_width - this.width);\n            this.new_y = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * (this.canvas_height - this.height);\n        }\n        this.last_move++;\n        let dx = this.x - this.new_x;\n        let dy = this.y - this.new_y;\n        this.x -= dx / 20;\n        this.y -= dy / 20;\n        this.life_index += opt.delta_time;\n        if (this.life_index > this.life_length)\n            this.mark_delete = true;\n        super.update(opt);\n    }\n    set_position(opt) {\n        super.set_position(opt);\n        this.new_x -= opt.game_speed;\n        this.collision_x = this.x + this.collision_adjust_x + this.width * this.collision_scale;\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/enemy/enemy4.ts?')},"./src/enemy/enemy5.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   enemy5: () => (/* binding */ enemy5)\n/* harmony export */ });\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util.js */ "./src/util.ts");\n/* harmony import */ var _baseEnemy_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./baseEnemy.js */ "./src/enemy/baseEnemy.ts");\n\n\nconst imgEnemy5 = new Image();\nimgEnemy5.src = "./res/enemy/enemy5.png";\nclass enemy5 extends _baseEnemy_js__WEBPACK_IMPORTED_MODULE_1__.baseEnemy {\n    direction_x;\n    direction_y;\n    constructor(opt) {\n        const sprite_length = 5;\n        const sprite_width = 271;\n        const sprite_height = 194;\n        const size_modifier = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 0.1 + 0.3;\n        const width = sprite_width * size_modifier;\n        const height = sprite_height * size_modifier;\n        super({\n            ...opt,\n            img: imgEnemy5,\n            x: opt.canvas_width,\n            y: (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * (opt.canvas_height - height),\n            width,\n            height,\n            sprite_width,\n            sprite_height,\n            sprite_length,\n            have_particle: true,\n            point: 3,\n        });\n        this.direction_x = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 3 + 1.5;\n        this.direction_y = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 5 - 2.5;\n    }\n    update(opt) {\n        this.x -= this.direction_x;\n        this.y -= this.direction_y;\n        if (this.x < 0 - this.width)\n            this.mark_delete = true;\n        if (this.y < 0 || this.y > this.canvas_height - this.height) {\n            this.direction_y = this.direction_y * -1;\n        }\n        super.update(opt);\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/enemy/enemy5.ts?')},"./src/enemy/enemy6.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   enemy6: () => (/* binding */ enemy6)\n/* harmony export */ });\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util.js */ "./src/util.ts");\n/* harmony import */ var _baseEnemy_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./baseEnemy.js */ "./src/enemy/baseEnemy.ts");\n\n\nconst imgEnemy6 = new Image();\nimgEnemy6.src = "./res/enemy/enemy6.png";\nclass enemy6 extends _baseEnemy_js__WEBPACK_IMPORTED_MODULE_1__.baseEnemy {\n    speed;\n    angle;\n    curve;\n    constructor(opt) {\n        const sprite_length = 5;\n        const sprite_width = 261;\n        const sprite_height = 209;\n        const size_modifier = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 0.1 + 0.3;\n        const width = sprite_width * size_modifier;\n        const height = sprite_height * size_modifier;\n        super({\n            ...opt,\n            img: imgEnemy6,\n            x: opt.canvas_width,\n            y: (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * opt.canvas_height * 0.5,\n            width,\n            height,\n            sprite_width,\n            sprite_height,\n            sprite_length,\n            point: 4,\n        });\n        this.speed = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 2 + 2;\n        this.angle = 0;\n        this.curve = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 3;\n    }\n    update(opt) {\n        this.x -= this.speed;\n        this.y += Math.sin(this.angle) * this.curve;\n        this.angle += 0.04;\n        if (this.x < 0 - this.width)\n            this.mark_delete = true;\n        super.update(opt);\n    }\n    draw(opt) {\n        opt.ctx.save();\n        opt.ctx.globalAlpha = 0.5;\n        super.draw(opt);\n        opt.ctx.restore();\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/enemy/enemy6.ts?')},"./src/enemy/enemy7.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   enemy7: () => (/* binding */ enemy7)\n/* harmony export */ });\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util.js */ "./src/util.ts");\n/* harmony import */ var _baseEnemy_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./baseEnemy.js */ "./src/enemy/baseEnemy.ts");\n\n\nconst imgEnemy7 = new Image();\nimgEnemy7.src = "./res/enemy/enemy7.png";\nclass enemy7 extends _baseEnemy_js__WEBPACK_IMPORTED_MODULE_1__.baseEnemy {\n    move_speed;\n    constructor(opt) {\n        const sprite_length = 5;\n        const sprite_width = 229;\n        const sprite_height = 171;\n        const size_modifier = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 0.1 + 0.3;\n        const width = sprite_width * size_modifier;\n        const height = sprite_height * size_modifier;\n        super({\n            ...opt,\n            img: imgEnemy7,\n            x: opt.canvas_width + width,\n            y: opt.canvas_height - height,\n            width,\n            height,\n            sprite_width,\n            sprite_height,\n            sprite_length,\n            point: 2,\n        });\n        this.move_speed = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 10 + 5;\n    }\n    update(opt) {\n        this.x -= (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * this.move_speed;\n        if (this.x < 0 - this.width)\n            this.mark_delete = true;\n        super.update(opt);\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/enemy/enemy7.ts?')},"./src/enemy/enemy8.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   enemy8: () => (/* binding */ enemy8)\n/* harmony export */ });\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util.js */ "./src/util.ts");\n/* harmony import */ var _baseEnemy_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./baseEnemy.js */ "./src/enemy/baseEnemy.ts");\n\n\nconst imgEnemy8 = new Image();\nimgEnemy8.src = "./res/enemy/enemy8.png";\nclass enemy8 extends _baseEnemy_js__WEBPACK_IMPORTED_MODULE_1__.baseEnemy {\n    destination_y;\n    speed;\n    string_x;\n    string_y;\n    constructor(opt) {\n        const sprite_length = 5;\n        const sprite_width = 310;\n        const sprite_height = 175;\n        const size_modifier = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 0.1 + 0.3;\n        const width = sprite_width * size_modifier;\n        const height = sprite_height * size_modifier;\n        super({\n            ...opt,\n            img: imgEnemy8,\n            x: opt.canvas_width + width,\n            y: (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() > 0.5 ? (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * (opt.canvas_height - height) : 0 - height,\n            width,\n            height,\n            sprite_width,\n            sprite_height,\n            sprite_length,\n            point: 3,\n        });\n        this.destination_y = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * ((opt.canvas_height - this.height) * 0.8);\n        this.speed = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 2 - 4;\n        if (this.y < this.destination_y) {\n            this.speed *= -1;\n        }\n        this.string_x = this.x + this.width * 0.5;\n        this.string_y = this.y + 10;\n    }\n    update(opt) {\n        this.y += this.speed;\n        this.string_y = this.y + 10;\n        this.string_x = this.x + this.width * 0.5;\n        if (this.y > this.destination_y && this.speed > 0) {\n            this.speed *= -1;\n        }\n        if (this.y < 0 - this.height - 5) {\n            this.mark_delete = true;\n        }\n        super.update(opt);\n    }\n    draw(opt) {\n        opt.ctx.beginPath();\n        opt.ctx.moveTo(this.string_x, 0);\n        opt.ctx.lineTo(this.string_x, this.string_y);\n        opt.ctx.stroke();\n        super.draw(opt);\n    }\n    set_position(opt) {\n        super.set_position(opt);\n        this.string_x = this.x + this.width * 0.5;\n        this.collision_x = this.x + this.collision_adjust_x + this.width * this.collision_scale;\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/enemy/enemy8.ts?')},"./src/enemy/enemy9.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   enemy9: () => (/* binding */ enemy9)\n/* harmony export */ });\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util.js */ "./src/util.ts");\n/* harmony import */ var _baseEnemy_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./baseEnemy.js */ "./src/enemy/baseEnemy.ts");\n\n\nconst imgEnemy9 = new Image();\nimgEnemy9.src = "./res/enemy/enemy9.png";\nclass enemy9 extends _baseEnemy_js__WEBPACK_IMPORTED_MODULE_1__.baseEnemy {\n    move_speed;\n    angle;\n    angle_speed;\n    curve;\n    constructor(opt) {\n        const sprite_length = 5;\n        const sprite_width = 60;\n        const sprite_height = 44;\n        const size_modifier = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 0.8 + 1.1;\n        const width = sprite_width * size_modifier;\n        const height = sprite_height * size_modifier;\n        super({\n            ...opt,\n            img: imgEnemy9,\n            x: opt.canvas_width,\n            y: (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * (opt.canvas_height - height),\n            width,\n            height,\n            sprite_width,\n            sprite_height,\n            sprite_length,\n            have_particle: true,\n            point: 3,\n        });\n        this.move_speed = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 4 + 1;\n        this.angle = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 2;\n        this.angle_speed = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 0.2;\n        this.curve = (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 5;\n    }\n    update(opt) {\n        this.x -= this.move_speed;\n        if (this.x < 0 - this.width)\n            this.mark_delete = true;\n        this.y += this.curve * Math.sin(this.angle);\n        this.angle += this.angle_speed;\n        super.update(opt);\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/enemy/enemy9.ts?')},"./src/explosion.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   explosion: () => (/* binding */ explosion)\n/* harmony export */ });\n/* harmony import */ var _baseAnimation_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./baseAnimation.js */ "./src/baseAnimation.ts");\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util.js */ "./src/util.ts");\n\n\nconst imgExplosion = new Image();\nimgExplosion.src = "./res/boom.png";\nconst soundExplosion = "./res/boom.wav";\nclass explosion extends _baseAnimation_js__WEBPACK_IMPORTED_MODULE_0__.baseAnimation {\n    sound_played;\n    sound;\n    angle;\n    dx;\n    dy;\n    sx;\n    constructor(opt) {\n        const sprite_length = 5;\n        const sprite_width = 200;\n        const sprite_height = 179;\n        const width = sprite_width * opt.scale;\n        const height = sprite_height * opt.scale;\n        super({\n            img: imgExplosion,\n            x: opt.x,\n            y: opt.y,\n            width,\n            height,\n            sprite_width,\n            sprite_height,\n            sprite_length,\n            fps: 30,\n            animation_repeat: false,\n        });\n        opt.play_sound ??= true;\n        if (opt.play_sound) {\n            this.sound_played = false;\n            this.sound = soundExplosion;\n        }\n        this.angle = (0,_util_js__WEBPACK_IMPORTED_MODULE_1__.MathRandom)() * 180;\n        this.dx = 0 - this.width * 0.5;\n        this.dy = 0 - this.height * 0.5;\n        this.sx = 0;\n    }\n    update(opt) {\n        if (this.sound && !this.sound_played) {\n            this.sound_played = true;\n            new Audio(this.sound).play();\n        }\n        super.update({\n            delta_time: opt.delta_time,\n            onframechange: () => {\n                this.sx = this.sprite_width * this.frame;\n            },\n        });\n    }\n    draw(opt) {\n        opt.ctx.save();\n        opt.ctx.translate(this.x, this.y);\n        opt.ctx.rotate(this.angle);\n        opt.ctx.drawImage(this.img, (0,_util_js__WEBPACK_IMPORTED_MODULE_1__.MathFloor)(this.sx), 0, this.sprite_width, this.sprite_width, this.dx, this.dy, this.width, this.height);\n        opt.ctx.restore();\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/explosion.ts?')},"./src/fire.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fire: () => (/* binding */ fire)\n/* harmony export */ });\n/* harmony import */ var _particle_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./particle.js */ "./src/particle.ts");\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util.js */ "./src/util.ts");\n\n\nconst imgFire = new Image();\nimgFire.src = "./res/fire.png";\nclass fire extends _particle_js__WEBPACK_IMPORTED_MODULE_0__.particle {\n    img;\n    img_size;\n    constructor(opt) {\n        super({\n            x: opt.x,\n            y: opt.y,\n            size: (0,_util_js__WEBPACK_IMPORTED_MODULE_1__.MathRandom)() * 100 + 50,\n        });\n        this.img = imgFire;\n        this.img_size = -this.size * 0.5;\n    }\n    update() {\n        super.update();\n        this.img_size = -this.size * 0.5;\n    }\n    draw(opt) {\n        opt.ctx.drawImage(this.img, (0,_util_js__WEBPACK_IMPORTED_MODULE_1__.MathFloor)(this.x), (0,_util_js__WEBPACK_IMPORTED_MODULE_1__.MathFloor)(this.y), this.size, this.size);\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/fire.ts?')},"./src/game.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   game: () => (/* binding */ game)\n/* harmony export */ });\n/* harmony import */ var _bg2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bg2.js */ "./src/bg2.ts");\n/* harmony import */ var _enemy_enemy1_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./enemy/enemy1.js */ "./src/enemy/enemy1.ts");\n/* harmony import */ var _enemy_enemy2_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./enemy/enemy2.js */ "./src/enemy/enemy2.ts");\n/* harmony import */ var _enemy_enemy3_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./enemy/enemy3.js */ "./src/enemy/enemy3.ts");\n/* harmony import */ var _enemy_enemy4_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./enemy/enemy4.js */ "./src/enemy/enemy4.ts");\n/* harmony import */ var _enemy_enemy5_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./enemy/enemy5.js */ "./src/enemy/enemy5.ts");\n/* harmony import */ var _enemy_enemy6_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./enemy/enemy6.js */ "./src/enemy/enemy6.ts");\n/* harmony import */ var _enemy_enemy7_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./enemy/enemy7.js */ "./src/enemy/enemy7.ts");\n/* harmony import */ var _enemy_enemy8_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./enemy/enemy8.js */ "./src/enemy/enemy8.ts");\n/* harmony import */ var _enemy_enemy9_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./enemy/enemy9.js */ "./src/enemy/enemy9.ts");\n/* harmony import */ var _enemy_enemy10_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./enemy/enemy10.js */ "./src/enemy/enemy10.ts");\n/* harmony import */ var _enemy_enemy11_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./enemy/enemy11.js */ "./src/enemy/enemy11.ts");\n/* harmony import */ var _explosion_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./explosion.js */ "./src/explosion.ts");\n/* harmony import */ var _fire_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./fire.js */ "./src/fire.ts");\n/* harmony import */ var _player_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./player.js */ "./src/player.ts");\n/* harmony import */ var _progress_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./progress.js */ "./src/progress.ts");\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./util.js */ "./src/util.ts");\n/* harmony import */ var _input_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./input.js */ "./src/input.ts");\n/* harmony import */ var _score_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./score.js */ "./src/score.ts");\n/* harmony import */ var _dust_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./dust.js */ "./src/dust.ts");\n/* harmony import */ var _control_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./control.js */ "./src/control.ts");\n/* harmony import */ var _gui_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./gui.js */ "./src/gui.ts");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst enemyDB = {\n    enemy1: _enemy_enemy1_js__WEBPACK_IMPORTED_MODULE_1__.enemy1,\n    enemy2: _enemy_enemy2_js__WEBPACK_IMPORTED_MODULE_2__.enemy2,\n    enemy3: _enemy_enemy3_js__WEBPACK_IMPORTED_MODULE_3__.enemy3,\n    enemy4: _enemy_enemy4_js__WEBPACK_IMPORTED_MODULE_4__.enemy4,\n    enemy5: _enemy_enemy5_js__WEBPACK_IMPORTED_MODULE_5__.enemy5,\n    enemy6: _enemy_enemy6_js__WEBPACK_IMPORTED_MODULE_6__.enemy6,\n    enemy7: _enemy_enemy7_js__WEBPACK_IMPORTED_MODULE_7__.enemy7,\n    enemy8: _enemy_enemy8_js__WEBPACK_IMPORTED_MODULE_8__.enemy8,\n    enemy9: _enemy_enemy9_js__WEBPACK_IMPORTED_MODULE_9__.enemy9,\n    enemy10: _enemy_enemy10_js__WEBPACK_IMPORTED_MODULE_10__.enemy10,\n    enemy11: _enemy_enemy11_js__WEBPACK_IMPORTED_MODULE_11__.enemy11,\n};\nconst enemy_type = ["enemy1", "enemy2", "enemy3", "enemy4", "enemy5", "enemy6", "enemy7", "enemy8", "enemy9", "enemy10", "enemy11"];\n// const enemy_type = ["enemy4"];\n// const enemy_type = ["enemy8", "enemy11"];\n// const enemy_type = ["enemy9", "enemy10", "enemy11"];\nclass game {\n    canvas_mark;\n    ctx;\n    static_ctx;\n    value_ctx;\n    control_ctx;\n    pointer_ctx;\n    marker_ctx;\n    canvas_width;\n    canvas_height;\n    base_height;\n    ctl;\n    gui;\n    bg;\n    player;\n    input;\n    prg_game;\n    prg_life;\n    prg_power;\n    enemy_list = [];\n    explosion_list = [];\n    dust_list = [];\n    fire_list = [];\n    score_list = [];\n    progress_list = [];\n    dust_max = 50;\n    fire_max = 50;\n    fps_min = 30;\n    debug = false;\n    game_up = false;\n    game_over = false;\n    game_timeout = false;\n    game_pause = false;\n    game_fps = 0;\n    game_fps_list = [];\n    score_value = 0;\n    score_text = "0";\n    progress_index = 0;\n    progress_max = 1000;\n    progress_timer = 0;\n    progress_timer_index = 0;\n    game_level = 1;\n    enemy_index = 0;\n    enemy_interval = 0;\n    enemy_interval_max = 1000;\n    constructor(opt) {\n        this.canvas_mark = opt.canvas_mark;\n        this.ctx = opt.ctx;\n        this.static_ctx = opt.static_ctx;\n        this.value_ctx = opt.value_ctx;\n        this.control_ctx = opt.control_ctx;\n        this.pointer_ctx = opt.pointer_ctx;\n        this.marker_ctx = opt.marker_ctx;\n        this.canvas_width = opt.canvas_width;\n        this.canvas_height = opt.canvas_height;\n        opt.debug ??= false;\n        this.debug = opt.debug;\n        this.input = new _input_js__WEBPACK_IMPORTED_MODULE_17__.input();\n        this.ctl = new _control_js__WEBPACK_IMPORTED_MODULE_20__.control({ canvas_mark: this.canvas_mark, canvas_width: this.canvas_width, canvas_height: this.canvas_height });\n        this.gui = new _gui_js__WEBPACK_IMPORTED_MODULE_21__.gui({ canvas_width: this.canvas_width, canvas_height: this.canvas_height, debug: this.debug });\n        this.bg = new _bg2_js__WEBPACK_IMPORTED_MODULE_0__.bg2({ canvas_width: this.canvas_width, canvas_height: this.canvas_height });\n        this.base_height = this.canvas_height - this.bg.ground;\n        this.player = new _player_js__WEBPACK_IMPORTED_MODULE_14__.player({ canvas_width: this.canvas_width, canvas_height: this.base_height, debug: this.debug });\n        this.prg_game = new _progress_js__WEBPACK_IMPORTED_MODULE_15__.progress({\n            x: this.canvas_width * 0.5 - this.canvas_width * 0.4 * 0.5,\n            y: 45,\n            min: 0,\n            max: this.progress_max,\n            width: this.canvas_width * 0.4,\n            value: this.progress_index,\n            bar_color: ["red", "yellow", "green"],\n        });\n        this.prg_life = new _progress_js__WEBPACK_IMPORTED_MODULE_15__.progress({\n            x: this.canvas_width - 130,\n            y: 30,\n            width: 100,\n            value: this.player.life,\n            max: 100,\n            bar_color: ["red", "yellow", "green"],\n        });\n        this.prg_power = new _progress_js__WEBPACK_IMPORTED_MODULE_15__.progress({\n            x: this.canvas_width - 130,\n            y: 60,\n            width: 100,\n            value: this.player.power,\n            max: 100,\n            bar_color: ["red", "yellow", "green"],\n        });\n        //draw control\n        setTimeout(() => {\n            this.gui.draw({ ctx: this.static_ctx });\n            if ((0,_util_js__WEBPACK_IMPORTED_MODULE_16__.isTouchDevice)()) {\n                this.ctl.draw({ ctx: this.control_ctx, ctxMark: this.marker_ctx });\n                this.ctl.attach_touch({\n                    canvas_mark: this.canvas_mark,\n                    marker_ctx: this.marker_ctx,\n                    pointer_ctx: this.pointer_ctx,\n                    debug: this.debug,\n                });\n            }\n            else {\n                this.ctl.attach_mouse({\n                    canvas_mark: this.canvas_mark,\n                    marker_ctx: this.marker_ctx,\n                    pointer_ctx: this.pointer_ctx,\n                    debug: this.debug,\n                });\n            }\n        }, 1500);\n    }\n    resize() {\n        this.ctl.resize();\n    }\n    gen_enemy_interval() {\n        return this.enemy_interval_max - this.game_level * 10;\n    }\n    game_start() {\n        this.game_level = 1;\n        this.progress_index = 0;\n        this.progress_max = 1000;\n        this.progress_timer = performance.now() + 60000;\n        this.progress_timer_index = 60;\n        this.enemy_index = 0;\n        let tmp_enemy_interval = this.gen_enemy_interval();\n        this.enemy_interval = (0,_util_js__WEBPACK_IMPORTED_MODULE_16__.MathRandom)() * tmp_enemy_interval + tmp_enemy_interval;\n        this.enemy_list = [];\n        this.explosion_list = [];\n        this.dust_list = [];\n        this.fire_list = [];\n        this.score_list = [];\n        this.player.set_state("idle");\n        this.player.life = 100;\n        this.player.power = 0;\n        this.player.speed = 0;\n        this.player.max_speed = 14 + this.game_level;\n        this.player.weight = 1;\n        this.player.velocity_y = 0;\n        this.player.y = this.base_height - this.player.height;\n        this.player.powered = false;\n        this.player.invulnerable = false;\n        this.score_value = 0;\n        this.score_text = "0";\n        window.removeEventListener("keyup", this.game_stop_listener);\n        window.addEventListener("keyup", this.game_pause_listener);\n        this.game_over = false;\n        this.game_timeout = false;\n        this.cleanup_ctxvalue_message();\n        requestAnimationFrame((timestamp) => {\n            this.animate(timestamp);\n        });\n    }\n    game_level_up() {\n        this.game_level++;\n        this.progress_index = 0;\n        this.progress_max = 1000 + this.game_level * 100;\n        this.progress_timer = performance.now() + 60000;\n        this.progress_timer_index = 60;\n        this.enemy_index = 0;\n        let tmp_enemy_interval = this.gen_enemy_interval();\n        this.enemy_interval = (0,_util_js__WEBPACK_IMPORTED_MODULE_16__.MathRandom)() * tmp_enemy_interval + tmp_enemy_interval;\n        this.enemy_list = [];\n        this.explosion_list = [];\n        this.dust_list = [];\n        this.fire_list = [];\n        this.player.set_state("idle");\n        this.player.life += 10;\n        if (this.player.life > 100)\n            this.player.life = 100;\n        this.player.speed = 0;\n        this.player.max_speed = 14 + this.game_level;\n        this.player.weight = 1;\n        this.player.velocity_y = 0;\n        this.player.y = this.base_height - this.player.height;\n        this.player.powered = false;\n        this.player.invulnerable = false;\n        window.removeEventListener("keyup", this.game_stop_listener);\n        window.addEventListener("keyup", this.game_pause_listener);\n        this.game_up = false;\n        this.cleanup_ctxvalue_message();\n        requestAnimationFrame((timestamp) => {\n            this.animate(timestamp);\n        });\n    }\n    game_continue() {\n        this.progress_timer = performance.now() + this.progress_timer_index * 1000;\n        this.game_pause = false;\n        this.cleanup_ctxvalue_message();\n        requestAnimationFrame((timestamp) => {\n            this.animate(timestamp);\n        });\n    }\n    add_explosion(enemy, play_sound) {\n        this.explosion_list.push(new _explosion_js__WEBPACK_IMPORTED_MODULE_12__.explosion({\n            x: enemy.x + enemy.width * 0.5,\n            y: enemy.y + enemy.height * 0.5,\n            scale: enemy.width * 0.008,\n            play_sound: play_sound,\n        }));\n    }\n    add_floating_score(enemy, deduction) {\n        let point = (0,_util_js__WEBPACK_IMPORTED_MODULE_16__.MathFloor)((100 - (enemy.y / (enemy.canvas_height - enemy.height + this.base_height)) * 100) * 0.1 * enemy.point);\n        if (deduction && point > 0)\n            point *= -1;\n        if (!deduction && point < 0)\n            point *= -1;\n        this.score_list.push(new _score_js__WEBPACK_IMPORTED_MODULE_18__.score({\n            text: `${point > 0 ? "+" : ""}${point}`,\n            value: point,\n            x: enemy.x + enemy.width * 0.5,\n            y: enemy.y + enemy.height * 0.5,\n            destination_x: 90,\n            destination_y: 60,\n        }));\n    }\n    collision_detection() {\n        //collision\n        this.enemy_list.forEach((i) => {\n            if (!i.mark_delete) {\n                if (i.is_collide({ player: this.player })) {\n                    if (this.player.is_powered()) {\n                        i.explode_out = false;\n                        this.add_explosion(i, true);\n                        this.add_floating_score(i, false);\n                        i.mark_delete = true;\n                    }\n                    else {\n                        if (!this.player.invulnerable) {\n                            if (this.player.life > 30) {\n                                this.player.life -= 10;\n                                this.player.set_state("gethit");\n                            }\n                            else if (this.player.life > 0) {\n                                this.player.life -= 10;\n                                this.player.set_state("dizzy");\n                            }\n                            else {\n                                this.player.set_state("ko");\n                                setTimeout(() => {\n                                    this.game_over = true;\n                                    window.removeEventListener("keyup", this.game_pause_listener);\n                                    window.addEventListener("keyup", this.game_stop_listener);\n                                }, 500);\n                            }\n                        }\n                        if (!this.game_over && !this.game_timeout) {\n                            i.explode_out = false;\n                            this.add_explosion(i, false);\n                            this.add_floating_score(i, true);\n                            i.mark_delete = true;\n                        }\n                    }\n                }\n            }\n        });\n    }\n    draw_message(title, message, color) {\n        (0,_util_js__WEBPACK_IMPORTED_MODULE_16__.draw_text)({\n            ctx: this.value_ctx,\n            x: this.canvas_width * 0.5,\n            y: this.base_height * 0.5 - 20,\n            text: title,\n            font_weight: 60,\n            text_align: "center",\n            text_color: color,\n        });\n        (0,_util_js__WEBPACK_IMPORTED_MODULE_16__.draw_text)({\n            ctx: this.value_ctx,\n            x: this.canvas_width * 0.5,\n            y: this.base_height * 0.5 + 20,\n            text: message,\n            font_weight: 30,\n            text_align: "center",\n            text_color: color,\n        });\n    }\n    cleanup_ctxvalue_debug() {\n        this.value_ctx.clearRect(60, 85, 50, 20);\n        this.value_ctx.clearRect(63, 105, 50, 20);\n        this.value_ctx.clearRect(58, 125, 50, 20);\n        this.value_ctx.clearRect(95, 145, 50, 20);\n        this.value_ctx.clearRect(75, 165, 50, 20);\n        this.value_ctx.clearRect(70, 185, 50, 20);\n        this.value_ctx.clearRect(88, 205, 70, 20);\n    }\n    cleanup_ctxvalue() {\n        this.value_ctx.clearRect(80, 20, 250, 50);\n        this.value_ctx.clearRect(this.canvas_width * 0.5 - this.canvas_width * 0.4 * 0.5 + 40, 15, 30, 25);\n        this.value_ctx.clearRect(this.canvas_width * 0.5 + this.canvas_width * 0.4 * 0.5 - 45, 15, 50, 25);\n        this.value_ctx.clearRect(this.canvas_width * 0.5 - this.canvas_width * 0.4 * 0.5, 45, this.canvas_width * 0.4, 20);\n        this.value_ctx.clearRect(this.canvas_width - 130, 30, 100, 20);\n        this.value_ctx.clearRect(this.canvas_width - 130, 60, 100, 20);\n    }\n    cleanup_ctxvalue_message() {\n        this.value_ctx.clearRect((this.canvas_width - this.canvas_width * 0.5) * 0.5, (this.canvas_height - this.bg.ground) * 0.5 - 70, this.canvas_width * 0.5, 100);\n    }\n    draw_status() {\n        //cleanup\n        this.cleanup_ctxvalue();\n        //score\n        (0,_util_js__WEBPACK_IMPORTED_MODULE_16__.draw_text)({\n            ctx: this.value_ctx,\n            x: 90,\n            y: 60,\n            text: `${this.score_text}`,\n            text_color: this.score_value < 0 ? "red" : "white",\n            font_weight: 40,\n        });\n        //level\n        (0,_util_js__WEBPACK_IMPORTED_MODULE_16__.draw_text)({\n            ctx: this.value_ctx,\n            x: (this.canvas_width - this.prg_game.width) * 0.5 + 47,\n            y: 35,\n            text: `${this.game_level}`,\n            text_align: "start",\n        });\n        //timer\n        (0,_util_js__WEBPACK_IMPORTED_MODULE_16__.draw_text)({\n            ctx: this.value_ctx,\n            x: (this.canvas_width + this.prg_game.width) * 0.5,\n            y: 35,\n            text: `0:${this.progress_timer_index.toString().padStart(2, "0")}`,\n            text_align: "end",\n            text_color: this.progress_timer_index < 20 ? "red" : "white",\n        });\n        //progress\n        this.prg_game.update(this.progress_index, 0, this.progress_max);\n        //life\n        this.prg_life.update(this.player.life);\n        //power\n        this.prg_power.update(this.player.power);\n        //draw progress bar\n        [this.prg_game, this.prg_life, this.prg_power].forEach((i) => i.draw({ ctx: this.value_ctx }));\n        //game over message\n        if (this.game_over)\n            this.draw_message("Game over!", (0,_util_js__WEBPACK_IMPORTED_MODULE_16__.isTouchDevice)() ? "Touch HERE to try again." : "Press SPACEBAR to try again.", "red");\n        //game timeout message\n        if (this.game_timeout)\n            this.draw_message("Time up!", (0,_util_js__WEBPACK_IMPORTED_MODULE_16__.isTouchDevice)() ? "Touch HERE to try again." : "Press SPACEBAR to try again.", "red");\n        //game level up\n        if (this.game_up)\n            this.draw_message(`Level ${this.game_level} complete!`, (0,_util_js__WEBPACK_IMPORTED_MODULE_16__.isTouchDevice)() ? "Touch HERE to continue." : "Press SPACEBAR to continue.", "green");\n        //pause\n        if (this.game_pause)\n            this.draw_message(`Pause!`, (0,_util_js__WEBPACK_IMPORTED_MODULE_16__.isTouchDevice)() ? "Touch PAUSE BUTTON to continue." : "Press ENTER to continue.", "white");\n    }\n    last_timestamp = 0;\n    update(timestamp) {\n        const delta_time = timestamp - this.last_timestamp;\n        this.last_timestamp = timestamp;\n        //update game progress\n        this.progress_index += this.player.speed * 0.1;\n        if (this.progress_index >= this.progress_max) {\n            this.game_up = true;\n            window.removeEventListener("keyup", this.game_pause_listener);\n            window.addEventListener("keyup", this.game_stop_listener);\n        }\n        //update game timeout\n        this.progress_timer_index = (0,_util_js__WEBPACK_IMPORTED_MODULE_16__.MathFloor)((this.progress_timer - timestamp) * 0.001);\n        if (this.progress_timer_index <= 0) {\n            this.game_timeout = true;\n            window.removeEventListener("keyup", this.game_pause_listener);\n            window.addEventListener("keyup", this.game_stop_listener);\n        }\n        //update player power\n        this.player.power += 0.1;\n        if (this.player.power > 100)\n            this.player.power = 100;\n        //update bg\n        this.bg.update({ game_speed: this.player.speed });\n        //update player state\n        this.player.update_input(this.input);\n        //update player\n        this.player.update({ delta_time });\n        //add particle when player run\n        if (this.player.speed === this.player.max_speed) {\n            Array(3)\n                .fill("")\n                .forEach((_i) => {\n                this.fire_list.unshift(new _fire_js__WEBPACK_IMPORTED_MODULE_13__.fire({\n                    x: this.player.x - 40 + (0,_util_js__WEBPACK_IMPORTED_MODULE_16__.MathRandom)() * 10 - 10,\n                    y: this.player.y + 25 + (0,_util_js__WEBPACK_IMPORTED_MODULE_16__.MathRandom)() * 10 - 10,\n                }));\n            });\n        }\n        //add enemy\n        if (this.enemy_index >= this.enemy_interval) {\n            //choose enemy\n            const random_enemy_index = enemy_type[(0,_util_js__WEBPACK_IMPORTED_MODULE_16__.MathFloor)((0,_util_js__WEBPACK_IMPORTED_MODULE_16__.MathRandom)() * enemy_type.length)];\n            //create new enemy\n            const enemy_object = enemyDB[random_enemy_index];\n            const new_enemy = new enemy_object({ canvas_width: this.canvas_width, canvas_height: this.base_height, debug: this.debug });\n            //add explosion if explode in\n            if (new_enemy.explode_in) {\n                this.explosion_list.push(new _explosion_js__WEBPACK_IMPORTED_MODULE_12__.explosion({\n                    x: new_enemy.x + new_enemy.width * 0.5,\n                    y: new_enemy.y + new_enemy.height * 0.5,\n                    scale: (new_enemy.width / new_enemy.sprite_width) * 1.5,\n                    play_sound: false,\n                }));\n            }\n            //add enemy to list\n            this.enemy_list.push(new_enemy);\n            //sort enemy base on width\n            this.enemy_list.sort((a, b) => a.width - b.width);\n            //reset timer\n            let tmp_enemy_interval = this.gen_enemy_interval();\n            this.enemy_interval = (0,_util_js__WEBPACK_IMPORTED_MODULE_16__.MathRandom)() * tmp_enemy_interval + tmp_enemy_interval;\n            this.enemy_index = 0;\n        }\n        else\n            this.enemy_index += delta_time;\n        //fire, particle and explosion\n        [...this.fire_list, ...this.dust_list, ...this.explosion_list].forEach((i) => {\n            //update location\n            i.update({ delta_time });\n            //update location base on player speed\n            i.set_position({ game_speed: this.player.speed });\n        });\n        //floating score\n        this.score_list.forEach((i) => {\n            //update location\n            i.update();\n            //add to score if floating score deleted\n            if (i.mark_delete) {\n                this.score_value += i.value;\n                this.score_text = this.score_value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ",");\n            }\n        });\n        //enemy location\n        this.enemy_list.forEach((i) => {\n            //update location\n            i.update({ delta_time });\n            //update location base on player speed\n            i.set_position({ game_speed: this.player.speed });\n            //mark delete of out of screen\n            if (i.x < 0 - i.width)\n                i.mark_delete = true;\n            else {\n                if (i.mark_delete && i.explode_out)\n                    this.add_explosion(i, false);\n            }\n            //add particle\n            if (i.have_particle) {\n                this.dust_list.unshift(new _dust_js__WEBPACK_IMPORTED_MODULE_19__.dust({\n                    x: i.x + i.width * 0.5 + (0,_util_js__WEBPACK_IMPORTED_MODULE_16__.MathRandom)() * 50 - 25,\n                    y: i.y + i.height * 0.5 + (0,_util_js__WEBPACK_IMPORTED_MODULE_16__.MathRandom)() * 30 - 15,\n                    color: `rgba(${i.uid_number},0.2)`,\n                }));\n            }\n        });\n        //check collision\n        this.collision_detection();\n        //remove mark delete\n        this.score_list = this.score_list.filter((i) => !i.mark_delete);\n        this.dust_list = this.dust_list.filter((i) => !i.mark_delete);\n        this.fire_list = this.fire_list.filter((i) => !i.mark_delete);\n        this.explosion_list = this.explosion_list.filter((i) => !i.mark_delete);\n        this.enemy_list = this.enemy_list.filter((i) => !i.mark_delete);\n        //remove overflow particle\n        if (this.dust_list.length > this.dust_max)\n            this.dust_list = this.dust_list.slice(0, this.dust_max);\n        if (this.fire_list.length > this.fire_max)\n            this.fire_list = this.fire_list.slice(0, this.fire_max);\n    }\n    draw() {\n        [this.bg, ...this.fire_list, ...this.dust_list, ...this.score_list, ...this.enemy_list, this.player, ...this.explosion_list].forEach((i) => {\n            i.draw({ ctx: this.ctx });\n        });\n    }\n    game_stop_listener = (event) => {\n        if (event.key === " ") {\n            if (this.game_up || this.game_over || this.game_timeout) {\n                event.preventDefault();\n                event.stopPropagation();\n                if (this.game_over || this.game_timeout)\n                    this.game_start();\n                if (this.game_up)\n                    this.game_level_up();\n            }\n        }\n    };\n    game_pause_listener = (event) => {\n        if (event.key === "Enter") {\n            if (!this.game_up && !this.game_over && !this.game_timeout) {\n                event.preventDefault();\n                event.stopPropagation();\n                if (!this.game_pause) {\n                    this.game_pause = true;\n                }\n                else if (this.game_pause)\n                    this.game_continue();\n            }\n        }\n    };\n    is_enough_fps(timestamp, callback) {\n        const last_second = timestamp - 1000;\n        if (this.game_fps_list.length > this.fps_min)\n            this.game_fps_list = this.game_fps_list.filter((i) => i > last_second);\n        this.game_fps_list.push(timestamp);\n        this.game_fps = this.game_fps_list.length;\n        if (this.game_fps >= this.fps_min)\n            callback(timestamp);\n        else {\n            requestAnimationFrame((timestamp) => {\n                this.is_enough_fps(timestamp, callback);\n            });\n        }\n    }\n    debug_info() {\n        //cleanup\n        this.cleanup_ctxvalue_debug();\n        //generate function for easy populate debug info\n        let text_y = 100;\n        let text_y_index = 0;\n        const gen_text = (x, text, text_color) => {\n            (0,_util_js__WEBPACK_IMPORTED_MODULE_16__.draw_text)({\n                ctx: this.value_ctx,\n                x: x,\n                y: text_y + text_y_index++ * 20,\n                shadow_blur: 0,\n                text: text,\n                text_color: text_color ? text_color : "yellow",\n                font_family: "Arial",\n                font_weight: 15,\n            });\n        };\n        gen_text(63, `${this.game_fps}`, this.game_fps < 30 ? "red" : "yellow");\n        gen_text(65, `${this.dust_list.length}`);\n        gen_text(60, `${this.fire_list.length}`);\n        gen_text(100, `${this.explosion_list.length}`);\n        gen_text(80, `${this.enemy_list.length}`);\n        gen_text(75, `${this.score_list.length}`);\n        gen_text(90, `${(0,_util_js__WEBPACK_IMPORTED_MODULE_16__.read_random_index)()}`);\n    }\n    do_animate = (timestamp) => {\n        // this.ctl.draw({ ctx: this.staticCtx });\n        //update object\n        this.update(timestamp);\n        //draw object\n        this.draw();\n        //draw status\n        this.draw_status();\n        //count fps\n        if (this.debug)\n            this.debug_info();\n        if (!this.game_over && !this.game_timeout && !this.game_pause && !this.game_up) {\n            requestAnimationFrame((timestamp) => {\n                this.animate(timestamp);\n            });\n        }\n    };\n    animate(timestamp) {\n        if (this.debug)\n            this.is_enough_fps(timestamp, this.do_animate);\n        else\n            this.do_animate(timestamp);\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/game.ts?')},"./src/gui.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   gui: () => (/* binding */ gui)\n/* harmony export */ });\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util.js */ "./src/util.ts");\n\nclass box {\n    x;\n    y;\n    width;\n    height;\n    constructor(opt) {\n        this.x = opt.x;\n        this.y = opt.y;\n        this.width = opt.width;\n        this.height = opt.height;\n    }\n    draw(opt) {\n        opt.ctx.fillStyle = "red";\n        opt.ctx.fillRect(this.x, this.y, this.width, this.height);\n    }\n}\nclass progress {\n    x;\n    y;\n    width;\n    height;\n    bg_color;\n    shadow_color;\n    shadow_blur;\n    shadow_x;\n    shadow_y;\n    shadow_width;\n    shadow_height;\n    radius;\n    constructor(opt) {\n        opt.height ??= 20;\n        opt.shadow_color ??= "#555555";\n        opt.shadow_blur ??= 1;\n        opt.bg_color ??= "#FFFFFF";\n        opt.radius ??= 5;\n        this.x = opt.x;\n        this.y = opt.y;\n        this.width = opt.width;\n        this.height = opt.height;\n        this.radius = opt.radius;\n        this.bg_color = opt.bg_color;\n        this.shadow_color = opt.shadow_color;\n        this.shadow_blur = opt.shadow_blur;\n        this.shadow_x = this.x - this.shadow_blur;\n        this.shadow_y = this.y - this.shadow_blur;\n        this.shadow_width = this.width + this.shadow_blur * 2;\n        this.shadow_height = this.height + this.shadow_blur * 2;\n    }\n    draw(opt) {\n        opt.ctx.save();\n        if (this.radius) {\n            if (this.shadow_color && this.shadow_blur) {\n                opt.ctx.beginPath();\n                opt.ctx.fillStyle = this.shadow_color;\n                opt.ctx.roundRect(this.shadow_x, this.shadow_y, this.shadow_width, this.shadow_height, [this.radius]);\n                opt.ctx.fill();\n            }\n            opt.ctx.beginPath();\n            opt.ctx.fillStyle = this.bg_color;\n            opt.ctx.roundRect(this.x, this.y, this.width, this.height, [this.radius]);\n            opt.ctx.fill();\n        }\n        else {\n            if (this.shadow_color && this.shadow_blur) {\n                opt.ctx.fillStyle = this.shadow_color;\n                opt.ctx.fillRect(this.shadow_x, this.shadow_y, this.shadow_width, this.shadow_height);\n            }\n            opt.ctx.fillStyle = this.bg_color;\n            opt.ctx.fillRect(this.x, this.y, this.width, this.height);\n        }\n        opt.ctx.restore();\n    }\n}\nclass text {\n    x;\n    y;\n    text_value;\n    text_align;\n    font_weight;\n    font_family;\n    text_color;\n    shadow_color;\n    shadow_blur;\n    constructor(opt) {\n        this.x = opt.x;\n        this.y = opt.y;\n        this.text_value = opt.text;\n        this.text_align = opt.text_align;\n        this.font_weight = opt.font_weight;\n        this.font_family = opt.font_family;\n        this.text_color = opt.text_color;\n        this.shadow_color = opt.shadow_color;\n        this.shadow_blur = opt.shadow_blur;\n    }\n    draw(opt) {\n        (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.draw_text)({\n            ctx: opt.ctx,\n            x: this.x,\n            y: this.y,\n            text: this.text_value,\n            text_align: this.text_align,\n            font_weight: this.font_weight,\n            font_family: this.font_family,\n            text_color: this.text_color,\n            shadow_color: this.shadow_color,\n            shadow_blur: this.shadow_blur,\n        });\n    }\n}\nclass gui {\n    debug;\n    canvas_width;\n    canvas_height;\n    progress = [];\n    text = [];\n    box = [];\n    constructor(opt) {\n        opt.debug ??= false;\n        this.debug = opt.debug;\n        this.canvas_width = opt.canvas_width;\n        this.canvas_height = opt.canvas_height;\n        //text\n        this.text.push(new text({ x: 20, y: 60, text: ``, shadow_blur: 0, font_weight: 40 }));\n        //level\n        this.text.push(new text({ x: (this.canvas_width - this.canvas_width * 0.4) * 0.5, y: 35, text: "Level", text_align: "start" }));\n        //life\n        this.text.push(new text({ x: this.canvas_width - 150, y: 45, text: ``, text_align: "end", shadow_blur: 0 }));\n        //power\n        this.text.push(new text({ x: this.canvas_width - 150, y: 75, text: ``, text_align: "end", shadow_blur: 0 }));\n        if (this.debug) {\n            let text_y = 100;\n            let text_y_index = 0;\n            const gen_text = (text_value) => {\n                return new text({\n                    x: 20,\n                    y: text_y + text_y_index++ * 20,\n                    shadow_blur: 0,\n                    text: text_value,\n                    text_color: "yellow",\n                    font_family: "Arial",\n                    font_weight: 15,\n                });\n            };\n            this.text.push(gen_text("FPS :"));\n            this.text.push(gen_text("Dust :"));\n            this.text.push(gen_text("Fire :"));\n            this.text.push(gen_text("Explosion :"));\n            this.text.push(gen_text("Enemy :"));\n            this.text.push(gen_text("Score :"));\n            this.text.push(gen_text("Random :"));\n        }\n        //progress\n        //game\n        this.progress.push(new progress({ x: this.canvas_width * 0.5 - this.canvas_width * 0.4 * 0.5, y: 45, width: this.canvas_width * 0.4 }));\n        //life\n        this.progress.push(new progress({ x: this.canvas_width - 130, y: 30, width: 100 }));\n        //power\n        this.progress.push(new progress({ x: this.canvas_width - 130, y: 60, width: 100 }));\n    }\n    draw(opt) {\n        [...this.text, ...this.progress, ...this.box].forEach((i) => {\n            i.draw({ ctx: opt.ctx });\n        });\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/gui.ts?')},"./src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _game_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./game.js */ "./src/game.ts");\n//base on : https://www.youtube.com/watch?v=GFO_txvwK_c&t=13054s\n\nconst DEBUG = true;\nconst gameCanvas = document.getElementById("gameCanvas");\nconst guiCanvas = document.getElementById("guiCanvas");\nconst valueCanvas = document.getElementById("valueCanvas");\nconst controlCanvas = document.getElementById("controlCanvas");\nconst pointerCanvas = document.getElementById("pointerCanvas");\nconst markerCanvas = document.getElementById("markerCanvas");\n(function () {\n    document.addEventListener("DOMContentLoaded", () => {\n        if (gameCanvas && guiCanvas && valueCanvas && controlCanvas && pointerCanvas && markerCanvas) {\n            [gameCanvas, guiCanvas, valueCanvas, controlCanvas, pointerCanvas, markerCanvas].forEach((i) => {\n                i.width = 1300;\n                i.height = 700;\n            });\n            if (DEBUG) {\n                markerCanvas.classList.remove("hide");\n                pointerCanvas.classList.remove("hide");\n            }\n            else {\n                markerCanvas.classList.add("hide");\n                pointerCanvas.classList.add("hide");\n            }\n            const gameCtx = gameCanvas.getContext("2d");\n            const guiCtx = guiCanvas.getContext("2d");\n            const valueCtx = valueCanvas.getContext("2d");\n            const controlCtx = controlCanvas.getContext("2d");\n            const pointerCtx = pointerCanvas.getContext("2d");\n            const markerCtx = markerCanvas.getContext("2d");\n            if (gameCtx && guiCtx && valueCtx && controlCtx && pointerCtx && markerCtx) {\n                const d = new _game_js__WEBPACK_IMPORTED_MODULE_0__.game({\n                    canvas_mark: markerCanvas,\n                    ctx: gameCtx,\n                    static_ctx: guiCtx,\n                    control_ctx: controlCtx,\n                    pointer_ctx: pointerCtx,\n                    marker_ctx: markerCtx,\n                    value_ctx: valueCtx,\n                    canvas_width: gameCanvas.width,\n                    canvas_height: gameCanvas.height,\n                    debug: DEBUG,\n                });\n                setTimeout(() => {\n                    d.game_start();\n                }, 1000);\n                window.addEventListener("resize", () => {\n                    d.resize();\n                });\n            }\n        }\n        else\n            console.error("gameCanvas not found");\n    });\n})();\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/index.ts?')},"./src/input.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   input: () => (/* binding */ input)\n/* harmony export */ });\nclass input {\n    key_filter = ["ArrowLeft", "ArrowRight", "ArrowUp", "ArrowDown", " ", "Enter"];\n    last_key;\n    constructor() {\n        this.last_key = "";\n        window.addEventListener("keydown", (e) => {\n            if (this.key_filter.indexOf(e.key) > -1) {\n                e.preventDefault();\n                e.stopPropagation();\n                if (e.key === "ArrowLeft")\n                    this.last_key = "PRESS left";\n                if (e.key === "ArrowRight")\n                    this.last_key = "PRESS right";\n                if (e.key === "ArrowUp")\n                    this.last_key = "PRESS up";\n                if (e.key === "ArrowDown")\n                    this.last_key = "PRESS down";\n                if (e.key === " ")\n                    this.last_key = "PRESS space";\n                if (e.key === "Enter")\n                    this.last_key = "PRESS enter";\n                console.log(this.last_key);\n            }\n        });\n        window.addEventListener("keyup", (e) => {\n            if (this.key_filter.indexOf(e.key) > -1) {\n                e.preventDefault();\n                e.stopPropagation();\n                if (e.key === "ArrowLeft")\n                    this.last_key = "RELEASE left";\n                if (e.key === "ArrowRight")\n                    this.last_key = "RELEASE right";\n                if (e.key === "ArrowUp")\n                    this.last_key = "RELEASE up";\n                if (e.key === "ArrowDown")\n                    this.last_key = "RELEASE down";\n                if (e.key === " ")\n                    this.last_key = "RELEASE space";\n                if (e.key === "Enter")\n                    this.last_key = "RELEASE enter";\n                console.log(this.last_key);\n            }\n        });\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/input.ts?')},"./src/layer.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   layer: () => (/* binding */ layer)\n/* harmony export */ });\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util.js */ "./src/util.ts");\n\nclass layer {\n    img;\n    x;\n    y;\n    width;\n    height;\n    ratio;\n    canvas_width;\n    canvas_height;\n    x2;\n    speed_modifier;\n    constructor(opt) {\n        this.img = opt.img;\n        this.x = 0;\n        this.y = 0;\n        this.width = opt.width;\n        this.height = opt.height;\n        this.canvas_height = opt.canvas_height;\n        this.ratio = this.width / this.height;\n        this.canvas_width = this.canvas_height * this.ratio;\n        // console.log(`Width: ${this.width}\n        // Height: ${this.height}\n        // Ratio (W/H): ${this.ratio}\n        // Canvas Height: ${opt.canvas_height}\n        // Canvas Width: ${this.canvas_width}`);\n        this.speed_modifier = opt.speed_modifier;\n        this.x2 = this.x + this.width;\n    }\n    update(game_speed) {\n        this.x -= game_speed * this.speed_modifier;\n        if (this.x < 0 - this.width)\n            this.x = 0;\n        this.x2 = this.x + this.width - game_speed - 1;\n    }\n    draw(ctx) {\n        ctx.drawImage(this.img, (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathFloor)(this.x), (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathFloor)(this.y), this.width, this.height);\n        ctx.drawImage(this.img, (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathFloor)(this.x2), (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathFloor)(this.y), this.width, this.height);\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/layer.ts?')},"./src/particle.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   particle: () => (/* binding */ particle)\n/* harmony export */ });\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util.js */ "./src/util.ts");\n\nclass particle {\n    x;\n    y;\n    speed_x;\n    speed_y;\n    size;\n    mark_delete;\n    constructor(opt) {\n        opt.speed_x ??= (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)();\n        opt.speed_y ??= (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)();\n        opt.size ??= (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.MathRandom)() * 10 + 10;\n        this.x = opt.x;\n        this.y = opt.y;\n        this.speed_x = opt.speed_x;\n        this.speed_y = opt.speed_y;\n        this.size = opt.size;\n        this.mark_delete = false;\n    }\n    update() {\n        this.x -= this.speed_x;\n        this.y -= this.speed_y;\n        this.size *= 0.97;\n        if (this.size < 0.5)\n            this.mark_delete = true;\n    }\n    set_position(opt) {\n        this.x -= opt.game_speed;\n        if (this.x < 0 - this.size)\n            this.mark_delete = true;\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/particle.ts?')},"./src/player.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   player: () => (/* binding */ player)\n/* harmony export */ });\n/* harmony import */ var _baseAnimation_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./baseAnimation.js */ "./src/baseAnimation.ts");\n/* harmony import */ var _state_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./state.js */ "./src/state.ts");\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./util.js */ "./src/util.ts");\n\n\n\nclass player extends _baseAnimation_js__WEBPACK_IMPORTED_MODULE_0__.baseAnimation {\n    debug = false;\n    state_list = {};\n    current_state;\n    canvas_width;\n    canvas_height;\n    invulnerable;\n    powered;\n    power;\n    speed;\n    life;\n    max_speed;\n    velocity_y;\n    weight;\n    collision_scale = 0.5;\n    collision_adjust_x = 0;\n    collision_adjust_y = 0;\n    collision_x;\n    collision_y;\n    constructor(opt) {\n        const img = new Image();\n        img.src = "./res/player.png";\n        const sprite_width = 575;\n        const sprite_height = 523;\n        const width = sprite_width * 0.25;\n        const height = sprite_height * 0.25;\n        super({\n            img,\n            x: opt.canvas_width * 0.1,\n            y: opt.canvas_height - height,\n            width,\n            height,\n            sprite_width,\n            sprite_height,\n            sprite_length: 0,\n        });\n        opt.debug ??= false;\n        this.debug = opt.debug;\n        this.canvas_width = opt.canvas_width;\n        this.canvas_height = opt.canvas_height;\n        this.collision_x = this.x + this.collision_adjust_x + this.width * this.collision_scale;\n        this.collision_y = this.y + this.collision_adjust_y + this.height * this.collision_scale;\n        this.velocity_y = 0;\n        this.weight = 1;\n        this.speed = 0;\n        this.life = 100;\n        this.max_speed = 14;\n        this.power = 100;\n        this.powered = false;\n        this.invulnerable = false;\n        this.state_list = {\n            idle: new _state_js__WEBPACK_IMPORTED_MODULE_1__.state_idle(this),\n            jump: new _state_js__WEBPACK_IMPORTED_MODULE_1__.state_jump(this),\n            fall: new _state_js__WEBPACK_IMPORTED_MODULE_1__.state_fall(this),\n            power_fall: new _state_js__WEBPACK_IMPORTED_MODULE_1__.state_power_fall(this),\n            run: new _state_js__WEBPACK_IMPORTED_MODULE_1__.state_run(this),\n            dizzy: new _state_js__WEBPACK_IMPORTED_MODULE_1__.state_dizzy(this),\n            sit: new _state_js__WEBPACK_IMPORTED_MODULE_1__.state_sit(this),\n            roll: new _state_js__WEBPACK_IMPORTED_MODULE_1__.state_roll(this),\n            jump_roll: new _state_js__WEBPACK_IMPORTED_MODULE_1__.state_jump_roll(this),\n            fall_roll: new _state_js__WEBPACK_IMPORTED_MODULE_1__.state_fall_roll(this),\n            bite: new _state_js__WEBPACK_IMPORTED_MODULE_1__.state_bite(this),\n            ko: new _state_js__WEBPACK_IMPORTED_MODULE_1__.state_ko(this),\n            gethit: new _state_js__WEBPACK_IMPORTED_MODULE_1__.state_gethit(this),\n        };\n        this.current_state = this.state_list.idle;\n    }\n    update_input(input) {\n        this.current_state?.handle_input(input);\n    }\n    is_ground() {\n        return this.y >= this.canvas_height - this.height;\n    }\n    is_powered() {\n        return this.powered || this.speed === this.max_speed;\n    }\n    set_state = (state) => {\n        this.current_state = this.state_list[state];\n        this.current_state?.enter();\n    };\n    update(opt) {\n        this.y += this.velocity_y;\n        if (!this.is_ground())\n            this.velocity_y += this.weight;\n        else\n            this.velocity_y = 0;\n        if (this.y > this.canvas_height - this.height)\n            this.y = this.canvas_height - this.height;\n        this.power += 0.1;\n        if (this.power > 100)\n            this.power = 100;\n        if (this.power < 0)\n            this.power = 0;\n        this.current_state?.update();\n        super.update({\n            delta_time: opt.delta_time,\n            onframecomplete: () => {\n                this.current_state?.animation_end(this);\n            },\n        });\n        this.collision_x = this.x + this.collision_adjust_x + this.width * this.collision_scale;\n        this.collision_y = this.y + this.collision_adjust_y + this.height * this.collision_scale;\n    }\n    draw(opt) {\n        //draw sprite\n        super.draw(opt);\n        //draw collision area\n        if (this.debug) {\n            opt.ctx.save();\n            opt.ctx.strokeStyle = "white";\n            opt.ctx.beginPath();\n            opt.ctx.arc(this.collision_x, this.collision_y, this.collision_scale * 100, 0, _util_js__WEBPACK_IMPORTED_MODULE_2__.MathPI2);\n            opt.ctx.stroke();\n            opt.ctx.restore();\n        }\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/player.ts?')},"./src/progress.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   progress: () => (/* binding */ progress)\n/* harmony export */ });\nclass progress {\n    x;\n    y;\n    min;\n    max;\n    width;\n    height;\n    value;\n    percent;\n    bar_color;\n    bar_x;\n    bar_y;\n    bar_width;\n    bar_max_width;\n    bar_height;\n    radius;\n    padding;\n    constructor(opt) {\n        opt.shadow_color ??= "#555555";\n        opt.shadow_blur ??= 1;\n        opt.bg_color ??= "#FFFFFF";\n        opt.bar_color ??= "#555555";\n        opt.radius ??= 5;\n        opt.padding ??= 2;\n        opt.min ??= 0;\n        opt.max ??= 1000;\n        opt.height ??= 20;\n        opt.value ??= 0;\n        this.x = opt.x;\n        this.y = opt.y;\n        this.min = opt.min;\n        this.max = opt.max;\n        this.width = opt.width;\n        this.height = opt.height;\n        this.value = opt.value;\n        this.percent = this.value / this.max;\n        this.radius = opt.radius;\n        this.padding = opt.padding;\n        this.bar_x = this.x + this.padding;\n        this.bar_y = this.y + this.padding;\n        this.bar_height = this.height - this.padding * 2;\n        this.bar_max_width = this.width - this.padding * 2;\n        this.bar_width = this.bar_max_width * this.percent;\n        this.bar_color = opt.bar_color;\n    }\n    update(value, min, max) {\n        this.min = min ?? this.min;\n        this.max = max ?? this.max;\n        this.value = value;\n        if (this.value < this.min)\n            this.value = this.min;\n        if (this.value > this.max)\n            this.value = this.max;\n        this.percent = this.value / this.max;\n        this.bar_width = (this.width - this.padding * 2) * this.percent;\n    }\n    draw(opt) {\n        opt.ctx.save();\n        if (this.radius) {\n            opt.ctx.beginPath();\n            opt.ctx.fillStyle = this.gradient_bar_color(this.bar_color, opt.ctx, this.bar_x, this.bar_max_width);\n            opt.ctx.roundRect(this.bar_x, this.bar_y, this.bar_width, this.bar_height, [this.radius]);\n            opt.ctx.fill();\n        }\n        else {\n            opt.ctx.fillStyle = this.gradient_bar_color(this.bar_color, opt.ctx, this.bar_x, this.bar_max_width);\n            opt.ctx.fillRect(this.bar_x, this.bar_y, this.bar_width, this.bar_height);\n        }\n        opt.ctx.restore();\n    }\n    gradient_bar_color(bar_color, ctx, x, width) {\n        if (Array.isArray(bar_color)) {\n            if (bar_color.length >= 2) {\n                const color_step = 100 / (bar_color.length - 1) / 100;\n                let grad = ctx.createLinearGradient(x, 0, width + x, 0);\n                bar_color.forEach((i, ix) => {\n                    grad.addColorStop(ix * color_step, i);\n                });\n                return grad;\n            }\n            else if (bar_color.length === 1 && bar_color[0]) {\n                return bar_color[0];\n            }\n            else {\n                return "black";\n            }\n        }\n        else\n            return bar_color;\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/progress.ts?')},"./src/score.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   score: () => (/* binding */ score)\n/* harmony export */ });\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util.js */ "./src/util.ts");\n\nclass score {\n    text;\n    value;\n    x;\n    y;\n    destination_x;\n    destination_y;\n    speed_x;\n    speed_y;\n    mark_delete;\n    timer;\n    constructor(opt) {\n        this.text = opt.text;\n        this.value = opt.value;\n        this.x = opt.x;\n        this.y = opt.y;\n        this.destination_x = opt.destination_x;\n        this.destination_y = opt.destination_y;\n        this.speed_x = (this.destination_x - this.x) * 0.01;\n        this.speed_y = (this.destination_y - this.y) * 0.01;\n        this.mark_delete = false;\n        this.timer = 100;\n    }\n    update() {\n        this.x += this.speed_x;\n        this.y += this.speed_y;\n        this.timer--;\n        if (this.timer <= 0)\n            this.mark_delete = true;\n    }\n    draw(opt) {\n        (0,_util_js__WEBPACK_IMPORTED_MODULE_0__.draw_text)({\n            text_color: this.value <= 0 ? "red" : "white",\n            ctx: opt.ctx,\n            x: this.x,\n            y: this.y,\n            text: this.text,\n            font_weight: 30,\n        });\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/score.ts?')},"./src/state.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   state: () => (/* binding */ state),\n/* harmony export */   state_bite: () => (/* binding */ state_bite),\n/* harmony export */   state_dizzy: () => (/* binding */ state_dizzy),\n/* harmony export */   state_fall: () => (/* binding */ state_fall),\n/* harmony export */   state_fall_roll: () => (/* binding */ state_fall_roll),\n/* harmony export */   state_gethit: () => (/* binding */ state_gethit),\n/* harmony export */   state_idle: () => (/* binding */ state_idle),\n/* harmony export */   state_jump: () => (/* binding */ state_jump),\n/* harmony export */   state_jump_roll: () => (/* binding */ state_jump_roll),\n/* harmony export */   state_ko: () => (/* binding */ state_ko),\n/* harmony export */   state_list: () => (/* binding */ state_list),\n/* harmony export */   state_power_fall: () => (/* binding */ state_power_fall),\n/* harmony export */   state_roll: () => (/* binding */ state_roll),\n/* harmony export */   state_run: () => (/* binding */ state_run),\n/* harmony export */   state_sit: () => (/* binding */ state_sit)\n/* harmony export */ });\nconst state_list = {\n    idle: {\n        frame_y: 0,\n        sprite_length: 7,\n        animation_repeat: true,\n        collision_adjust_x: 0,\n        collision_adjust_y: 0,\n    },\n    jump: {\n        frame_y: 1,\n        sprite_length: 7,\n        animation_repeat: true,\n        collision_adjust_x: 0,\n        collision_adjust_y: 0,\n    },\n    fall: {\n        frame_y: 2,\n        sprite_length: 7,\n        animation_repeat: true,\n        collision_adjust_x: 0,\n        collision_adjust_y: 0,\n    },\n    run: {\n        frame_y: 3,\n        sprite_length: 8,\n        animation_repeat: true,\n        collision_adjust_x: 0,\n        collision_adjust_y: 0,\n    },\n    dizzy: {\n        frame_y: 4,\n        sprite_length: 11,\n        animation_repeat: false,\n        collision_adjust_x: 0,\n        collision_adjust_y: 0,\n    },\n    sit: {\n        frame_y: 5,\n        sprite_length: 5,\n        animation_repeat: true,\n        collision_adjust_x: 0,\n        collision_adjust_y: 15,\n    },\n    roll: {\n        frame_y: 6,\n        sprite_length: 7,\n        animation_repeat: true,\n        collision_adjust_x: -2,\n        collision_adjust_y: 22,\n    },\n    jump_roll: {\n        frame_y: 6,\n        sprite_length: 7,\n        animation_repeat: true,\n        collision_adjust_x: -2,\n        collision_adjust_y: 22,\n    },\n    fall_roll: {\n        frame_y: 6,\n        sprite_length: 7,\n        animation_repeat: true,\n        collision_adjust_x: -2,\n        collision_adjust_y: 22,\n    },\n    power_fall: {\n        frame_y: 6,\n        sprite_length: 7,\n        animation_repeat: true,\n        collision_adjust_x: -2,\n        collision_adjust_y: 22,\n    },\n    bite: {\n        frame_y: 7,\n        sprite_length: 7,\n        animation_repeat: false,\n        collision_adjust_x: 15,\n        collision_adjust_y: 8,\n    },\n    ko: {\n        frame_y: 8,\n        sprite_length: 12,\n        animation_repeat: false,\n        collision_adjust_x: 0,\n        collision_adjust_y: 30,\n    },\n    gethit: {\n        frame_y: 9,\n        sprite_length: 4,\n        animation_repeat: false,\n        collision_adjust_x: 0,\n        collision_adjust_y: 0,\n    },\n};\nclass state {\n    current_state;\n    player;\n    constructor(current_state, player) {\n        this.current_state = current_state;\n        this.player = player;\n    }\n    enter() {\n        this.player.frame = 0;\n        this.player.frame_x = 0;\n        this.player.collision_adjust_x = state_list[this.current_state].collision_adjust_x;\n        this.player.collision_adjust_y = state_list[this.current_state].collision_adjust_y;\n        this.player.frame_y = state_list[this.current_state].frame_y * this.player.sprite_height;\n        this.player.sprite_length = state_list[this.current_state].sprite_length - 1;\n        this.player.animation_repeat = state_list[this.current_state].animation_repeat;\n    }\n    update() { }\n    handle_input(_input) { }\n    animation_end(_player) { }\n}\nclass state_idle extends state {\n    constructor(player) {\n        super("idle", player);\n    }\n    enter() {\n        super.enter();\n        this.player.speed = 0;\n    }\n    handle_input(input) {\n        if (input.last_key === "PRESS right")\n            this.player.set_state("run");\n        if (input.last_key === "PRESS up")\n            this.player.set_state("jump");\n        if (input.last_key === "PRESS down")\n            this.player.set_state("sit");\n        if (input.last_key === "PRESS space")\n            this.player.set_state("bite");\n    }\n}\nclass state_jump extends state {\n    constructor(player) {\n        super("jump", player);\n    }\n    enter() {\n        super.enter();\n        if (this.player.is_ground()) {\n            this.player.weight = 1;\n            this.player.velocity_y -= 32;\n        }\n    }\n    update() {\n        super.update();\n        if (this.player.velocity_y > 0)\n            this.player.set_state("fall");\n    }\n    handle_input(input) {\n        if (input.last_key === "PRESS down") {\n            this.player.velocity_y = 0;\n            this.player.set_state("fall");\n        }\n        if (input.last_key === "PRESS right" && this.player.power > 10)\n            this.player.set_state("jump_roll");\n    }\n}\nclass state_fall extends state {\n    constructor(player) {\n        super("fall", player);\n    }\n    enter() {\n        super.enter();\n    }\n    update() {\n        super.update();\n        if (this.player.is_ground()) {\n            if (this.player.speed > 0)\n                this.player.set_state("run");\n            else\n                this.player.set_state("idle");\n        }\n    }\n    handle_input(input) {\n        if (input.last_key === "PRESS right" && this.player.power > 10)\n            this.player.set_state("fall_roll");\n        if (input.last_key === "PRESS down" && this.player.power > 10)\n            this.player.set_state("power_fall");\n    }\n}\nclass state_power_fall extends state {\n    constructor(player) {\n        super("power_fall", player);\n    }\n    enter() {\n        super.enter();\n        this.player.weight = 20;\n        this.player.speed = this.player.max_speed;\n    }\n    update() {\n        super.update();\n        this.player.power--;\n        if (this.player.is_ground()) {\n            this.player.speed = this.player.max_speed * 0.5;\n            this.player.set_state("run");\n        }\n        else {\n            if (this.player.power <= 0) {\n                this.player.weight = 1;\n                this.player.speed = this.player.max_speed * 0.5;\n                this.player.set_state("fall");\n            }\n        }\n    }\n    handle_input(input) {\n        if (input.last_key === "RELESE down") {\n            this.player.speed = this.player.max_speed * 0.5;\n            this.player.set_state("fall");\n        }\n    }\n}\nclass state_run extends state {\n    constructor(player) {\n        super("run", player);\n    }\n    enter() {\n        super.enter();\n        this.player.speed = this.player.max_speed * 0.5;\n    }\n    handle_input(input) {\n        if (input.last_key === "PRESS left")\n            this.player.set_state("idle");\n        if (input.last_key === "PRESS right" && this.player.power > 10)\n            this.player.set_state("roll");\n        if (input.last_key === "PRESS down")\n            this.player.set_state("sit");\n        if (input.last_key === "PRESS up")\n            this.player.set_state("jump");\n        if (input.last_key === "PRESS space")\n            this.player.set_state("bite");\n    }\n}\nclass state_dizzy extends state {\n    constructor(player) {\n        super("dizzy", player);\n    }\n    enter() {\n        super.enter();\n        this.player.speed = 0;\n        this.player.invulnerable = true;\n    }\n    animation_end(player) {\n        setTimeout(() => {\n            player.invulnerable = false;\n        }, 300);\n        player.set_state("idle");\n    }\n}\nclass state_sit extends state {\n    constructor(player) {\n        super("sit", player);\n    }\n    enter() {\n        super.enter();\n        this.player.invulnerable = true;\n        this.player.speed = 0;\n    }\n    update() {\n        super.update();\n        this.player.power += 0.5;\n    }\n    handle_input(input) {\n        if (input.last_key === "RELEASE down" || input.last_key === "PRESS up" || input.last_key === "PRESS left") {\n            this.player.invulnerable = false;\n            this.player.set_state("idle");\n        }\n        if (input.last_key === "PRESS left") {\n            this.player.invulnerable = false;\n            this.player.set_state("run");\n        }\n    }\n}\nclass state_roll extends state {\n    constructor(player) {\n        super("roll", player);\n    }\n    enter() {\n        super.enter();\n        this.player.speed = this.player.max_speed;\n    }\n    update() {\n        super.update();\n        this.player.power--;\n        if (this.player.power < 0) {\n            this.player.power = 0;\n            this.player.set_state("run");\n        }\n    }\n    handle_input(input) {\n        if (input.last_key === "RELEASE right")\n            this.player.set_state("run");\n        if (input.last_key === "RELEASE down")\n            this.player.set_state("run");\n        if (input.last_key === "PRESS up" && this.player.power > 10)\n            this.player.set_state("jump_roll");\n        if (input.last_key === "PRESS left")\n            this.player.set_state("idle");\n        if (input.last_key === "PRESS down")\n            this.player.set_state("sit");\n    }\n}\nclass state_jump_roll extends state {\n    constructor(player) {\n        super("jump_roll", player);\n    }\n    enter() {\n        super.enter();\n        this.player.speed = this.player.max_speed;\n    }\n    update() {\n        super.update();\n        this.player.power--;\n        if (this.player.velocity_y > 0) {\n            if (this.player.power <= 0) {\n                this.player.speed = this.player.max_speed * 0.5;\n                this.player.set_state("fall");\n            }\n            else {\n                this.player.set_state("fall_roll");\n            }\n        }\n        else {\n            if (this.player.power <= 0) {\n                this.player.speed = this.player.max_speed * 0.5;\n                this.player.set_state("jump");\n            }\n        }\n    }\n    handle_input(input) {\n        if (input.last_key === "RELEASE right") {\n            this.player.speed = this.player.max_speed * 0.5;\n            if (this.player.velocity_y > 0) {\n                this.player.set_state("fall");\n            }\n            else {\n                this.player.set_state("jump");\n            }\n        }\n    }\n}\nclass state_fall_roll extends state {\n    constructor(player) {\n        super("fall_roll", player);\n    }\n    enter() {\n        super.enter();\n        this.player.speed = this.player.max_speed;\n    }\n    update() {\n        super.update();\n        if (this.player.is_ground()) {\n            this.player.set_state("roll");\n        }\n        else {\n            this.player.power--;\n            if (this.player.power <= 0) {\n                this.player.speed = this.player.max_speed * 0.5;\n                this.player.set_state("fall");\n            }\n        }\n    }\n    handle_input(input) {\n        if (input.last_key === "RELEASE right") {\n            this.player.speed = this.player.max_speed * 0.5;\n            this.player.set_state("fall");\n        }\n    }\n}\nclass state_bite extends state {\n    constructor(player) {\n        super("bite", player);\n    }\n    enter() {\n        super.enter();\n        this.player.powered = true;\n        this.player.invulnerable = true;\n        this.player.speed = 0;\n    }\n    animation_end(player) {\n        setTimeout(() => {\n            player.powered = false;\n            player.invulnerable = false;\n        }, 300);\n        player.set_state("idle");\n    }\n}\nclass state_ko extends state {\n    constructor(player) {\n        super("ko", player);\n    }\n    enter() {\n        super.enter();\n        this.player.weight = 20;\n        this.player.invulnerable = true;\n        this.player.speed = 0;\n    }\n}\nclass state_gethit extends state {\n    constructor(player) {\n        super("gethit", player);\n    }\n    enter() {\n        super.enter();\n        this.player.invulnerable = true;\n        this.player.speed = 0;\n    }\n    animation_end(player) {\n        setTimeout(() => {\n            player.invulnerable = false;\n        }, 300);\n        player.set_state("idle");\n    }\n}\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/state.ts?')},"./src/util.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MathFloor: () => (/* binding */ MathFloor),\n/* harmony export */   MathFloorPosifive: () => (/* binding */ MathFloorPosifive),\n/* harmony export */   MathPI: () => (/* binding */ MathPI),\n/* harmony export */   MathPI2: () => (/* binding */ MathPI2),\n/* harmony export */   MathRandom: () => (/* binding */ MathRandom),\n/* harmony export */   draw_text: () => (/* binding */ draw_text),\n/* harmony export */   genUID: () => (/* binding */ genUID),\n/* harmony export */   isTouchDevice: () => (/* binding */ isTouchDevice),\n/* harmony export */   read_random_index: () => (/* binding */ read_random_index)\n/* harmony export */ });\nconst MathPI = Math.PI;\nconst MathPI2 = MathPI * 2;\nconst MathFloor = (n) => (n + (n < 0 ? -1 : 0)) >> 0;\nconst MathFloorPosifive = (n) => n >> 0;\nlet random_index = 0;\nconst random_max = 32000;\nconst random_table = Array(random_max)\n    .fill(0)\n    .map((_i) => Math.random());\nconst MathRandom = () => (++random_index >= random_max ? random_table[(random_index = 0)] : random_table[random_index]);\nconst read_random_index = () => random_index;\nconst genUID = () => {\n    return Array(3)\n        .fill("")\n        .map((_i) => MathFloor(MathRandom() * 255));\n};\nconst isTouchDevice = () => {\n    return "ontouchstart" in window || navigator.maxTouchPoints > 0;\n};\nconst draw_text = (opt) => {\n    opt.font_family ??= "Creepster";\n    opt.font_weight ??= 20;\n    opt.text_color ??= "white";\n    opt.shadow_color ??= "black";\n    opt.shadow_blur ??= 2;\n    opt.text_align ??= "left";\n    opt.ctx.save();\n    opt.ctx.textAlign = opt.text_align;\n    opt.ctx.font = `${opt.font_weight}px ${opt.font_family}`;\n    opt.ctx.fillStyle = opt.shadow_color;\n    opt.ctx.fillText(opt.text, MathFloor(opt.x + opt.shadow_blur), MathFloor(opt.y + opt.shadow_blur));\n    //text\n    opt.ctx.fillStyle = opt.text_color;\n    opt.ctx.fillText(opt.text, MathFloor(opt.x), MathFloor(opt.y));\n    opt.ctx.restore();\n};\n\n\n//# sourceURL=webpack://@printf83/ts-game/./src/util.ts?')}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./src/index.ts")})();